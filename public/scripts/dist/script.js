(()=>{var e={809:()=>{window.changelog=[{version:"1.0.37",date_time:"2022-02-16 01AM",changes:"added expo buttons for KT"},{version:"1.0.36",date_time:"2022-02-16 01AM",changes:"bugfix for own planets not shown in overview"},{version:"1.0.35",date_time:"2022-02-15 11PM",changes:"added relative / absolute score development chart"},{version:"1.0.34",date_time:"2022-02-15 01PM",changes:"added relative score growth chart"},{version:"1.0.33",date_time:"2022-02-14 06PM",changes:"bugfixes for fleets"},{version:"1.0.32",date_time:"2022-02-14 08AM",changes:"refactored planet overview"},{version:"1.0.31",date_time:"2022-02-13 09AM",changes:"added mouseover for notifications/timers"},{version:"1.0.30",date_time:"2022-02-13 01AM",changes:"added expo fleet calculator (thanks to Hyman!)"},{version:"1.0.29",date_time:"2022-02-12 10PM",changes:"useless firework feature for Wile E. Coyote"},{version:"1.0.28",date_time:"2022-02-11 10AM",changes:"added transfer matrix to hub"},{version:"1.0.27",date_time:"2022-02-10 2PM",changes:"formatting/styling for AKS"},{version:"1.0.26",date_time:"2022-02-07 03AM",changes:"added hostile spying overview"},{version:"1.0.25",date_time:"2022-02-07 12PM",changes:"toggle overview column sorting (ASC/DESC); optimized fleet overview; bugfix for used slot count"},{version:"1.0.24",date_time:"2022-02-07 11PM",changes:"added spy report overview for galaxy view"},{version:"1.0.23",date_time:"2022-02-07 11PM",changes:"added loading indicator for hub pages"},{version:"1.0.22",date_time:"2022-02-07 11PM",changes:"added second sort item above coordinates in overview (sort by system)"},{version:"1.0.21",date_time:"2022-02-07 03PM",changes:"changed defense score to planet's defense score (player's defense score in mouseover)"},{version:"1.0.20",date_time:"2022-02-07 06AM",changes:"added alliance filter for hub's research page"},{version:"1.0.19",date_time:"2022-02-06 05PM",changes:"added galaxy update check page"},{version:"1.0.18",date_time:"2022-02-06 03PM",changes:"added link to rename/delete planet (overview)"},{version:"1.0.17",date_time:"2022-02-05 08AM",changes:"added hub page for raids & expos"},{version:"1.0.16",date_time:"2022-02-04 08PM",changes:"show fleet slot usage & expedition stats"},{version:"1.0.15",date_time:"2022-02-04 01PM",changes:"show score differenz and details at flight overview"},{version:"1.0.14",date_time:"2022-02-04 09AM",changes:"added fleet tracking and overview enhancement (show ship/res diffs)"},{version:"1.0.13",date_time:"2022-02-02 10PM",changes:"added the black hole event for expeditions (for Sky/Mama) <3"},{version:"1.0.12",date_time:"2022-02-01 11PM",changes:"made coordinates/player name/score in hub -> planets sortable"},{version:"1.0.11",date_time:"2022-02-01 11PM",changes:"mark planet's production red, when storage limits are exceeded"},{version:"1.0.10",date_time:"2022-02-01 11PM",changes:'added "observe" function for research (visible at overview)'},{version:"1.0.9",date_time:"2022-02-01 11PM",changes:'added "observe" function for buildings (visible at overview)'},{version:"1.0.8",date_time:"2022-02-01 11AM",changes:"added last attack/spy to galaxy view"},{version:"1.0.7",date_time:"2022-02-01 04AM",changes:"added chart for alliance page (score development per member)"},{version:"1.0.6",date_time:"2022-02-01 03AM",changes:"added own score as a reference to player score charts"},{version:"1.0.5",date_time:"2022-02-01 03AM",changes:"changed button styles at buildings/research page when not affordable"},{version:"1.0.4",date_time:"2022-02-01 2AM",changes:"added changelog page"},{version:"1.0.3",date_time:"2022-02-01 01AM",changes:"added resources to overview (visit resource page at planets to update)"},{version:"1.0.2",date_time:"2022-02-01 01AM",changes:'added "show_galaxy" setting'},{version:"1.0.1",date_time:"2022-01-31 06PM",changes:"security bypasses / bugfix"},{version:"1.0.0",date_time:"2022-01-31 05PM",changes:"stable release with auto updater"}]},328:()=>{window.Menu=function(){this.init=function(){let e,t="";t+='<li><a style="color: #ee4d2e !important; font-size: 11px">pr0game Hub v'+version+"</a></li>",t+='<li><a href="#hub.planets"><i class="fa fa-globe-asia"></i> Planeten</a></li>',t+='<li><a href="#hub.research"><i class="fa fa-flask"></i> Forschung</a></li>',t+='<li><a href="#hub.fleet"><i class="fa fa-fighter-jet"></i> Flotte</a></li>',t+='<li><a href="#hub.score"><i class="fa fa-trophy"></i> Punkte</a></li>',t+='<li><a href="#hub.expos"><i class="fa fa-skull-crossbones"></i> Raids &amp; Expo</a></li>',t+='<li><a href="#hub.galaxy"><i class="fa fa-sync"></i> Gala-Aktualität</a></li>',t+='<li><a href="#hub.hostile-spying"><i class="fa fa-eye"></i> Fremdspionage</a></li>',t+='<li><a href="#hub.changelog"><i class="fa fa-history"></i> Changelog</a></li>',$("ul#menu").prepend(t),$(".res_max").each((function(t,a){e=$(a).html(),$(a).html(e.replace(".000","K"))}))}}},989:()=>{top.Colors=function(){this.list={black:[22,22,24],white:[242,245,244],red:[238,77,46],gray:[136,136,136],pink:[255,0,130],green:[92,184,92],blue:[0,143,255],yellow:[247,197,22],cyan:[0,255,255]},this.getRgb=function(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},this.black=function(){return this.getRgb(this.list.black)},this.white=function(){return this.getRgb(this.list.white)},this.red=function(){return this.getRgb(this.list.red)},this.gray=function(){return this.getRgb(this.list.gray)},this.pink=function(){return this.getRgb(this.list.pink)},this.green=function(){return this.getRgb(this.list.green)},this.blue=function(){return this.getRgb(this.list.blue)},this.yellow=function(){return this.getRgb(this.list.yellow)},this.cyan=function(){return this.getRgb(this.list.cyan)}}},170:()=>{window.parsePageAlliance=function(){var e=window.location.href.match(/[\?\&]id=([(0-9]+)/i)[1]||0,t=$($("content table")[0]);t.append('<tr><th colspan="2">Planeten</th></tr>'),getJSON("alliances/"+e+"/planets",(function(e){200===e.status&&$.each(JSON.parse(e.responseText),(function(e,a){t.append('<tr><td style="text-align: left">'+a.coordinates+'</td><td style="text-align: left">'+a.name+"</td></tr>")}))})),displayAllianceChart(e)}},550:()=>{window.PageBuildings=function(){const e=this;this.data=[],this.convertHtml=function(){$("content").addClass("buildings"),$(".infos, .infoso").each((function(t,a){$(a).addClass("building"),$($(a).find("div:nth-child(2)")).addClass("building-left"),$($(a).find("div:nth-child(3)")).addClass("building-right"),e.disableButtons($($(a).find("div:nth-child(3)"))),e.changeBuildTimeStyle($($(a).find("div:nth-child(3)")))})),$("content").html($("content").html().replace(/\(Stufe ([0-9]+)\)/g,'<br><span class="highlight">Stufe $1</span><br>'))},this.init=function(){const t=[];let a,i;this.convertHtml(),$(".buildn").each((function(e,n){a=$(n).html().match(/\.info\(([0-9]+)\)\"\>([^<]+)\<\/a\>/),i=$(n).html().match(/Stufe ([0-9]+)/),t.push({building_id:getInt(a[1]),level:i?getInt(i[1]):0})})),postJSON("planets/buildings",{coordinates:ownGalaxy+":"+ownSystem+":"+ownPlanet,buildings:t},(function(t){e.data=JSON.parse(t.responseText),$(".buildn").each((function(t,i){a=$(i).html().match(/\.info\(([0-9]+)\)\"\>([^<]+)\<\/a\>/),$(i).append("Max Stufe: "+e.data[a[1]].max_level),e.data[a[1]].max_level>0&&$(i).append('<div class="player_names">'+e.data[a[1]].player_names.replace(/,/g,", ")+"</div>")}))}))},this.disableButtons=function(t){if($(t).find(".text-red").length>0){$($(t).find(".build_submit")).addClass("text-gray"),$(t).parent().addClass("fade-"+(0===$(t).find(".build_submit").length?"25":"75"));let a=$($(t).parent().find(".building-right")),i=$(a.find("> span:first-child")).html(),n=ownGalaxy+":"+ownSystem+":"+ownPlanet,s=$($(t).parent().find(".buildn > a")).attr("onclick").match(/\(([0-9]+)\)/)[1],r=e.getCost("Metall",i),l=e.getCost("Kristall",i),o=e.getCost("Deuterium",i);if((new PlanetResourceNotification).hasNotification(n,s)){const e=(new PlanetResourceNotification).getFinishTime(n);a.append("<br><button onclick=\"(new PlanetResourceNotification().removeNotification('"+n+'\'))" style="color: '+getRgb(cRed)+'"><i class="fa fa-bell-slash"></i> baubar in <span class="notification-timer" data-timestamp="'+e+'">'+formatTimeDiff(e)+"</span></button>")}else a.append("<br><button onclick=\"(new PlanetResourceNotification().addNotification('"+n+"', '"+s+"',"+r+","+l+","+o+'))" style="color: '+getRgb(cGreen)+'"><i class="fa fa-bell"></i> benachrichtigen, wenn baubar</button>')}window.setInterval((function(){$(".notification-timer").each((function(){$(this).text(formatTimeDiff($(this).attr("data-timestamp")))}))}),1e3)},this.changeBuildTimeStyle=function(e){$(e).html($(e).html().replace(/(.*)Bauzeit\:(.*)/,'$1<span class="text-gray">Bauzeit: $2</span>'))},this.getCost=function(e,t){let a;switch(e){case"Metall":a=t.match(/\<a (.*)\>(Metall)\<\/a\>(.*)\<b(.*)\<span(.*)\>([.0-9]+)\<\//);break;case"Kristall":a=t.match(/\<a (.*)\>(Kristall)\<\/a\>(.*)\<b(.*)\<span(.*)\>([.0-9]+)\<\//);break;case"Deuterium":a=t.match(/\<a (.*)\>(Deuterium)\<\/a\>(.*)\<b(.*)\<span(.*)\>([.0-9]+)\<\//)}return a?getInt(a[6]):0}}},551:()=>{window.PageFleet=function(){var e=this;this.data=[],this.maxPoints=2500,this.maxRessPoints=2500,this.maxFleetPoints=1250,this.fleet=[],this.init=function(){this.parseShips(),this.showExpoButton(),this.bindEnterKey()},this.parseShips=function(){const e=this;let t,a,i,n,s=[];$(".table519 tr").each((function(a,i){t=$(i).html().replace(/\n/,"").match(/id\=\"ship([0-9]+)\_value\"\>([\.0-9]+)\</),t&&(e.fleet.push({ship_id:getInt(t[1]),amount:getInt(t[2])}),s.push({ship_id:getInt(t[1]),amount:getInt(t[2])}))})),$("content > table:first-child > tbody > tr").each((function(e,r){$(r).find("td").length>1&&(a=$(r).find("td:nth-child(3)").html(),i=$(r).find("td:nth-child(4)").html().match(/\[([0-9]+)\:([0-9]+)\:([0-9]+)\]/),n=a.match(/\'\>([^<]+)\:\<\/td\>\<td class\=\'transparent\'\>([\.0-9]+)\</g),n&&i[1]==ownGalaxy&&i[2]==ownSystem&&i[3]==ownPlanet&&$.each(n,(function(e,a){t=a.match(/\'\>([^<]+)\:\<\/td\>\<td class\=\'transparent\'\>([\.0-9]+)\</),t&&s.push({ship_id:t[1],amount:getInt(t[2])})})))})),postJSON("planets/fleet",{coordinates:ownGalaxy+":"+ownSystem+":"+ownPlanet,fleet:s},(function(t){e.data=JSON.parse(t.responseText);let a='<br><table class="table 519" style="max-width: 519px !important"><tr><th style="text-align: left">Schiffstyp</th><th style="text-align: right">Anzahl (planetübergreifend)</th></tr>';$.each(e.data,(function(e,t){a+='<tr><td style="text-align: left">'+t.name+'</td><td style="text-align: right">'+t.sum+"</td></tr>"})),$("content").append(a+'</table><p style="max-width: 519px !important; margin: 10px auto"><i>Diese Anzahl der stationierten und in der Luft befindlichen Schiffe (Aktiver Planet = Startplanet) wird aktualisiert, sobald die entsprechende Flottenseite des Planeten geöffnet wird.<br><br>Nach Kampf mit Verlust, werden die verlorenen Schiffe also erst nach Aufruf der Flottenansicht am Startplaneten aktualisiert. Nach Schiffsbau v.v.<br><br>Nach erfolgreicher Stationierung müssen somit die Flottenseiten von Start- und Zielplanet zur Aktualisierung geöffnet werden.</i></p>')}))},this.showExpoButton=function(){$(".table519").each((function(e,t){-1!==$(t).html().search(/Neuer Auftrag:/)&&($(t).find("tr th").append('<span style="margin-left: 20px">Expo GT:</span> <a class="text-red" href="javascript:void(0)" onclick="pageFleet.setExpoFleet()">Ress</a> '),$(t).find("tr th").append('<a class="text-red" href="javascript:void(0)" onclick="pageFleet.setExpoFleet(true)">Schiffe</a> // '),$(t).find("tr th").append('Expo KT: <a class="text-red" href="javascript:void(0)" onclick="pageFleet.setExpoFleet(false, false)">Ress</a> '),$(t).find("tr th").append('<a class="text-red" href="javascript:void(0)" onclick="pageFleet.setExpoFleet(true, false)">Schiffe</a>'))}))},this.setExpoFleet=function(t=!1,a=!0){this.maxPoints=t?this.maxFleetPoints:this.maxRessPoints;let i,n=e.maxPoints;const s=JSON.parse(JSON.stringify(this.fleet));i=this.getShip(210),i&&0!==i.amount?(s[i.offset].used=(s[i.offset].used||0)+1,s[i.offset].amount--,n=e.subExpoPoints(n,210,1)):[].push("Es ist keine Spionagesonde vorhanden!");let r=!1;$.each([211,215,207,206,205,204],(function(t,a){r||(i=e.getShip(a),i&&(n=e.subExpoPoints(n,i.ship_id,1),r=!0,s[i.offset].used=(s[i.offset].used||0)+1,s[i.offset].amount--))}));const l=a?[203,202,204,205,206,207,215,211]:[202,203,204,205,206,207,215,211];let o,d,c;$.each(l,(function(t,a){i=e.getShip(a),i&&(o=e.getPointsPerShip(i.ship_id),d=Math.floor(n/o),d>s[i.offset].amount&&(d=s[i.offset].amount),n=e.subExpoPoints(n,i.ship_id,d),s[i.offset].used=(s[i.offset].used||0)+d,s[i.offset].amount-=d)})),i=this.getShip(210),i&&(o=e.getPointsPerShip(i.ship_id),d=Math.floor(n/o),d>s[i.offset].amount&&(d=s[i.offset].amount),n=e.subExpoPoints(n,i.ship_id,d),s[i.offset].used=(s[i.offset].used||0)+d,s[i.offset].amount-=d),$.each(s,(function(e,t){c=$("#ship"+t.ship_id+"_input"),c.val(t.used||0),c.parent().css("text-align","left")})),this.updatePoints()},this.updatePoints=function(){let t,a,i,n=0;$(".table519").each((function(s,r){-1!==$(r).html().search(/Neuer Auftrag:/)&&($($(r).find("input")).each((function(i,s){-1!==s.outerHTML.search(/name\=/)&&(a=$(s).attr("name").replace(/ship/,""),t=e.getPointsPerShip(a)*getInt($(s).val()),n+=t,$(s).change((function(){pageFleet.updatePoints()})),$($(s).parent().parent().find(".helper")).remove(),$(s).parent().parent().append('<td class="helper text-right" style="margin-left: 10px; width: 200px">'+numberFormat(t)+" Expo-Punkte</td>"))})),i=e.maxPoints!==n?"text-blue":"text-green",i=e.maxPoints>n?"text-red":i,$(".helper-headline").remove(),$(".table519 tr:nth-child(2)").append('<td class="helper-headline text-right"><span class="'+i+'">'+numberFormat(n)+"</span> / "+numberFormat(e.maxPoints)+" Expo-Punkte</td>"))}))},this.getShip=function(e){for(i=0;i<this.fleet.length;i++)if(e===this.fleet[i].ship_id)return this.fleet[i].offset=i,this.fleet[i];return null},this.getPointsPerShip=function(e){return 5*{202:4,203:12,204:4,205:10,206:27,207:60,208:30,209:16,210:1,211:75,213:110,214:9e3,215:70}[e]},this.subExpoPoints=function(e,t,a){return e-(this.getPointsPerShip(t)||0)*(a||0)},this.bindEnterKey=function(){$(window).keyup((function(e){1===$("content form").length&&0===$("*:focus").length&&"Enter"===e.key&&$("content .table519 form").submit()}))}}},164:()=>{window.PageGalaxy=function(){this.init=function(){this.parsePlanetIds(),this.enhanceList()},this.parsePlanetIds=function(){$("tr td:nth-child(2) a.tooltip_sticky").each((function(e,t){var a=$(t).attr("data-tooltip-content"),i=$(t).parent().parent().find("td:nth-child(6) a").attr("data-tooltip-content").match(/Dialog\.Buddy\(([0-9]+)\)/);i=i?parseInt(i[1]):null;var n=a.match(/([0-9]+)\:([0-9]+)\:([0-9]+)/,a),s=a.match(/doit\(6\,([0-9]+)/,a);s=s?parseInt(s[1]):null,n&&s&&postJSON("planets",{coordinates:n[0],planet_id:s,player_id:i},(function(e){}))}))},this.enhanceList=function(){const e=$("content > table tr:first-child th").html().match(/System ([0-9]+)\:([0-9]+)/),t=$($("content > table tr")[1]);t.append('<th class="text-right"><i class="fa fa-crosshairs"></i></th>'),t.append('<th class="text-right"><i class="fa fa-user-secret"></i></th>'),t.append('<th class="text-right">MET</th>'),t.append('<th class="text-right">CRY</th>'),t.append('<th class="text-right">DEU</th>'),getJSON("galaxy/"+e[1]+"/"+e[2],(function(e){if(200===e.status){const t=JSON.parse(e.responseText);let a,i;$("content > table tr").each((function(e,n){a=$($($(n).find("td")[0]).find("a")),0===a.length&&(a=$($(n).find("td")[0])),i=parseInt(a.html()),!isNaN(i)&&t[i]&&($(n).append('<td class="text-right" style="white-space: nowrap;">'+(t[i].last_battle_report||"")+"</td>"),$(n).append('<td class="text-right" style="white-space: nowrap;" id="lastSpyReport'+t[i].id+'">'+(t[i].last_spy_report||"")+"</td>"),$(n).append('<td class="text-right" style="white-space: nowrap;">'+(t[i].last_spy_metal||"")+"</td>"),$(n).append('<td class="text-right" style="white-space: nowrap;">'+(t[i].last_spy_crystal||"")+"</td>"),$(n).append('<td class="text-right" style="white-space: nowrap;">'+(t[i].last_spy_deuterium||"")+"</td>"))})),$.each(t,(function(e,t){$("#lastSpyReport"+t.id).click((function(){getJSON("spy-reports/"+t.galaxy+"/"+t.system+"/"+t.planet,(function(e){e=JSON.parse(e.responseText),showSpyReportHistory(e)}))}))}))}}))}}},497:()=>{window.PageHangar=function(){this.init=function(){this.convertHtml()},this.convertHtml=function(){$("content").addClass("hangar"),$(".infos, .infoso").each((function(e,t){$(t).addClass("hangar"),$($(t).find("div:nth-child(2)")).addClass("building-left"),$($(t).find("div:nth-child(3)")).addClass("building-right")})),$("content").html($("content").html().replace(/Maximal baubare Einheiten:(.*)\<br\>/g,"Maximal baubare Einheiten: $1")),$("content").html($("content").html().replace(/\(Stufe ([0-9]+)\)/g,'<br><span class="highlight">Stufe $1</span><br>'))}}},691:()=>{window.PageHub=function(){const e=this;this.container=$("content"),this.init=function(){},this.loadPage=function(e){switch(e){case"planets":this.clearPage(),this.loadPagePlanets();break;case"research":this.clearPage(),this.loadPageResearch();break;case"fleet":this.clearPage(),this.loadPageFleet();break;case"score":this.clearPage(),this.loadPageScore();break;case"expos":this.clearPage(),this.loadPageExpos();break;case"galaxy":this.clearPage(),this.loadPageGalaxy();break;case"hostile-spying":this.clearPage(),this.loadPageHostileSpying();break;case"changelog":this.clearPage(),this.loadPageChangelog();break;default:alert("unknown page "+e)}},this.clearPage=function(){this.container.html('<i class="fa fa-spin fa-spinner"></i> Daten werden geladen.'),this.container.addClass("hub")},this.sortData=function(e,t){let a=getValue("hub_planets_orderBy")||"coordinates";const i="DESC"!==getValue("hub_planets_orderDirection")?1:-1,n=a.split(".");2===n.length&&(e=e[n[0]],t=t[n[0]],a=n[1]);let s=e[a]||"",r=t[a]||"";return"alliance_name"!==a&&"name"!==a?(s=getInt(s),r=getInt(r)):(s=s.toLowerCase(),r=r.toLowerCase()),(s<r?-1:s>r?1:0)*i},this.loadPagePlanets=function(){getJSON("hub/planets",(function(t){200!==t.status&&e.container.html('<p style="color: '+getRgb(cRed)+';">Da Wing-Member häufiger die Allianz verlassen, sind Flotteninformationen etc. nur für die Main Allianz einsehbar.</p>');let a=JSON.parse(t.responseText);const i=e.sortData;a=a.sort(i);let n="";n+='<div class="infos text-left">',n+='<p style="padding-left: 10px"><i class="fa fa-info-circle"></i> <i>Halte die Maus über die Buchstaben, um die Gebäudenamen zu sehen.</i></p>',n+='<table class="table519">',n+="<tr>",n+='<th class="sortable" colspan="3" data-sort="coordinates" data-direction="ASC">Koordinaten</th>',n+='<th class="sortable" style="text-align: left;" data-sort="name" data-direction="ASC">Spieler</th>',n+='<th class="sortable" style="text-align: left;" data-sort="score_building" data-direction="DESC">Punkte</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Metallmine">M</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Kristallmine">K</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Deuteriumsynthetisierer">D</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Solarkraftwerk">S</th>',n+='<th style="text-align: right; color: '+getRgb(cPink)+'" title="Technodom">T</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Fusionskraftwerk">F</th>',n+='<th style="text-align: right; color: '+getRgb(cBlue)+'" title="Roboterfabrik">R</th>',n+='<th style="text-align: right; color: '+getRgb(cBlue)+'" title="Nanofabrik">N</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Raumschiffwerft">R</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Metallspeicher">M</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Kristallspeicher">K</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Deuteriumtank">D</th>',n+='<th style="text-align: right; color: '+getRgb(cPink)+'" title="Forschungslabor">F</th>',n+='<th style="text-align: right; color: '+getRgb(cBlue)+'" title="Terraformer">T</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Allianzdepot">A</th>',n+='<th style="text-align: right; color: '+getRgb(cYellow)+'" title="Mondbasis">M</th>',n+='<th style="text-align: right; color: '+getRgb(cYellow)+'" title="Phalanx">P</th>',n+='<th style="text-align: right; color: '+getRgb(cYellow)+'" title="Sprungtor">S</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Raketensilo">R</th>',n+="</tr>",$.each(a,(function(e,t){n+="<tr>",n+='<td style="text-align: right; width: 35px">'+t.galaxy+"</td>",n+='<td style="text-align: right; width: 35px">'+t.system+"</td>",n+='<td style="text-align: right; width: 35px">'+t.planet+"</td>",n+='<td style="text-align: left;">'+t.name+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.score_building||0)/getMaxValue(a,"score_building"),cRed)+'">'+(t.score_building||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.metal_mine||0)/getMaxValue(a,"metal_mine"),cRed)+'">'+(t.metal_mine||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.crystal_mine||0)/getMaxValue(a,"crystal_mine"),cRed)+'">'+(t.crystal_mine||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.deuterium_mine||0)/getMaxValue(a,"deuterium_mine"),cRed)+'">'+(t.deuterium_mine||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.solar_plant||0)/getMaxValue(a,"solar_plant"),cRed)+'">'+(t.solar_plant||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.techno_dome||0)/getMaxValue(a,"techno_dome"),cRed)+'">'+(t.techno_dome||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.fusion_plant||0)/getMaxValue(a,"fusion_plant"),cRed)+'">'+(t.fusion_plant||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.robot_factory||0)/getMaxValue(a,"robot_factory"),cRed)+'">'+(t.robot_factory||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.nano_factory||0)/getMaxValue(a,"nano_factory"),cRed)+'">'+(t.nano_factory||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.hangar||0)/getMaxValue(a,"hangar"),cRed)+'">'+(t.hangar||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.metal_storage||0)/getMaxValue(a,"metal_storage"),cRed)+'">'+(t.metal_storage||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.crystal_storage||0)/getMaxValue(a,"crystal_storage"),cRed)+'">'+(t.crystal_storage||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.deuterium_storage||0)/getMaxValue(a,"deuterium_storage"),cRed)+'">'+(t.deuterium_storage||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.laboratory||0)/getMaxValue(a,"laboratory"),cRed)+'">'+(t.laboratory||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.terra_former||0)/getMaxValue(a,"terra_former"),cRed)+'">'+(t.terra_former||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.alliance_depot||0)/getMaxValue(a,"alliance_depot"),cRed)+'">'+(t.alliance_depot||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.base||0)/getMaxValue(a,"base"),cRed)+'">'+(t.base||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.phalanx||0)/getMaxValue(a,"phalanx"),cRed)+'">'+(t.phalanx||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.portal||0)/getMaxValue(a,"portal"),cRed)+'">'+(t.portal||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.missile_silo||0)/getMaxValue(a,"missile_silo"),cRed)+'">'+(t.missile_silo||"")+"</td>",n+="</tr>"})),n+="</table>",n+="</div>",e.container.html(n),$("th.sortable").click((function(){$(this).attr("data-sort")&&(setValue("hub_planets_orderDirection",$(this).attr("data-direction")),setValue("hub_planets_orderBy",$(this).attr("data-sort")),e.loadPagePlanets())})),$("th.sortable").each((function(e,t){$(t).css("cursor","pointer"),$(t).attr("data-sort")==(getValue("hub_planets_orderBy")||"coordinates")&&$(t).attr("data-direction")==(getValue("hub_planets_orderDirection")||"ASC")&&($(t).prepend("ASC"===$(t).attr("data-direction")?'<i class="fa fa-caret-up"></i> ':'<i class="fa fa-caret-down"></i> '),$(t).css("white-space","nowrap"))}))}))},this.loadPageResearch=function(){getJSON("hub/research",(function(t){let a=JSON.parse(t.responseText);const i=getValue("filter_alliance_id")||"";let n="";n+='<div class="infos text-left">',n+='<select style="margin-left: 10px" id="allianceIdSelect" onchange="setValue(\'filter_alliance_id\', this.value); pageHub.loadPageResearch()">',n+='<option value="">Alle</option>',n+='<option value="12"'+("12"===i?" selected":"")+">FELIDAE FERNICHTER</option>",n+='<option value="95"'+("95"===i?" selected":"")+">FELIDAE FERNICHTER WING</option>",n+="</select>",n+='<p style="padding-left: 10px"><i class="fa fa-info-circle"></i> <i>Halte die Maus über die Buchstaben, um die Technologienamen zu sehen.</i></p>',n+='<table class="table519">',n+="<tr>",n+="<td></td>",n+="<td></td>",n+='<td colspan="2"></td>',n+='<td colspan="3">Flottenwert</td>',n+='<td colspan="2">Technik</td>',n+='<td colspan="3">Triebwerk</td>',n+='<td colspan="3">Bewaffnung</td>',n+='<td colspan="2"></td>',n+='<td colspan="3">Produktion</td>',n+="<td></td>",n+="</tr>",n+="<tr>",n+='<th style="text-align: left;">Spieler</th>',n+='<th style="text-align: right;">Punkte</th>',n+='<th style="text-align: right;" title="Spionagetechnik">S</th>',n+='<th style="text-align: right;" title="Computertechnik">C</th>',n+='<th style="text-align: right;" title="Waffentechnik">W</th>',n+='<th style="text-align: right;" title="Schildtechnik">S</th>',n+='<th style="text-align: right;" title="Raumschiffpanzerung">R</th>',n+='<th style="text-align: right;" title="Energietechnik">E</th>',n+='<th style="text-align: right;" title="Hyperraumtechnik">H</th>',n+='<th style="text-align: right;" title="Verbrennungstriebwerk">V</th>',n+='<th style="text-align: right;" title="Impulstriebwerk">I</th>',n+='<th style="text-align: right;" title="Hyperraumantrieb">H</th>',n+='<th style="text-align: right;" title="Lasertechnik">L</th>',n+='<th style="text-align: right;" title="Ionentechnik">I</th>',n+='<th style="text-align: right;" title="Plasmatechnik">P</th>',n+='<th style="text-align: right;" title="Intergalaktisches Forschungsnetzwerk">I</th>',n+='<th style="text-align: right;" title="Astrophysik">A</th>',n+='<th style="text-align: right;" title="Produktionsmaximierung Metall">M</th>',n+='<th style="text-align: right;" title="Produktionsmaximierung Kristall">K</th>',n+='<th style="text-align: right;" title="Produktionsmaximierung Deuterium">D</th>',n+='<th style="text-align: right;" title="Gravitonforschung">G</th>',n+="</tr>",$.each(a,(function(e,t){""!==i&&parseInt(i)!==t.alliance_id||(n+="<tr>",n+='<td style="text-align: left;">'+t.name+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.score_science||0)/getMaxValue(a,"score_science"),cRed)+'">'+t.score_science+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.spy_tech||0)/getMaxValue(a,"spy_tech"),cRed)+'">'+(t.spy_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.computer_tech||0)/getMaxValue(a,"computer_tech"),cRed)+'">'+(t.computer_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.military_tech||0)/getMaxValue(a,"military_tech"),cRed)+'">'+(t.military_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.defense_tech||0)/getMaxValue(a,"defense_tech"),cRed)+'">'+(t.defense_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.shield_tech||0)/getMaxValue(a,"shield_tech"),cRed)+'">'+(t.shield_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.energy_tech||0)/getMaxValue(a,"energy_tech"),cRed)+'">'+(t.energy_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.hyperspace_tech||0)/getMaxValue(a,"hyperspace_tech"),cRed)+'">'+(t.hyperspace_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.combustion_tech||0)/getMaxValue(a,"combustion_tech"),cRed)+'">'+(t.combustion_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.impulse_motor_tech||0)/getMaxValue(a,"impulse_motor_tech"),cRed)+'">'+(t.impulse_motor_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.hyperspace_motor_tech||0)/getMaxValue(a,"hyperspace_motor_tech"),cRed)+'">'+(t.hyperspace_motor_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.laser_tech||0)/getMaxValue(a,"laser_tech"),cRed)+'">'+(t.laser_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.ion_tech||0)/getMaxValue(a,"ion_tech"),cRed)+'">'+(t.ion_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.buster_tech||0)/getMaxValue(a,"buster_tech"),cRed)+'">'+(t.buster_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.intergalactic_tech||0)/getMaxValue(a,"intergalactic_tech"),cRed)+'">'+(t.intergalactic_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.expedition_tech||0)/getMaxValue(a,"expedition_tech"),cRed)+'">'+(t.expedition_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.metal_proc_tech||0)/getMaxValue(a,"metal_proc_tech"),cRed)+'">'+(t.metal_proc_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.crystal_proc_tech||0)/getMaxValue(a,"crystal_proc_tech"),cRed)+'">'+(t.crystal_proc_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.deuterium_proc_tech||0)/getMaxValue(a,"deuterium_proc_tech"),cRed)+'">'+(t.deuterium_proc_tech||"")+"</td>",n+='<td style="text-align: right; color: '+getColorAlt(cGreen,parseInt(t.graviton_tech||0)/getMaxValue(a,"graviton_tech"),cRed)+'">'+(t.graviton_tech||"")+"</td>",n+="</tr>")})),n+="</table>",n+="</div>",e.container.html(n),getJSON("hub/transfer-matrix",(function(t){a=JSON.parse(t.responseText),n="",n+='<div class="infos text-left">',n+='<p style="margin-left: 10px"><b>Flotten-Transfers</b><br>Zeig an, ob der Sender (links) dem Empfänger (rechts) Schiffe schicken darf.</p>',n+='<table class="table519">',n+="<tr>",n+='<th class="text-left">Send. / Empf.</th>',$.each(a,(function(e,t){""!==i&&parseInt(i)!==t.alliance_id||(n+='<th class="text-center" style="width: 75px"><div style="width: 75px; overflow: hidden; text-overflow: ellipsis">'+t.name+"</div></th>")})),n+="</tr>",$.each(a,(function(e,t){""!==i&&parseInt(i)!==t.alliance_id||(n+="<tr>",n+='<td style="text-align: left;">'+t.name+"</td>",$.each(a,(function(e,a){""!==i&&parseInt(i)!==a.alliance_id||(null===t.transfer_possible[a.id]?n+='<td class="text-center" style="color: '+getRgb(cGray)+'">---</td>':n+='<td class="text-center text-'+(t.transfer_possible[a.id]?"green":"red")+'">'+(t.transfer_possible[a.id]?"Ja":"Nein")+"</td>")})),n+="</tr>")})),n+="</table>",n+="</div>",e.container.append(n)}))}))},this.loadPageFleet=function(){getJSON("hub/fleet",(function(t){const a=JSON.parse(t.responseText);let i,n="";n+='<div class="infos text-left">',n+='<p style="padding-left: 10px"><i class="fa fa-info-circle"></i> <i>Halte die Maus über die Buchstaben, um die Schiffsnamen zu sehen.</i></p>',n+='<table class="borderless">',n+="<tr>",n+='<th style="text-align: left;">Spieler</th>',n+='<th style="text-align: right">Punkte</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Kleiner Transporter">KT</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Großer Transporter">GT</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Kolonieschiff">KS</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Recycler">Rec</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Spionagesonden">Spy</th>',n+='<th style="text-align: right; color: '+getRgb(cGreen)+'" title="Solar Satellit">Sat</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Leichter Jäger">LJ</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Schwerer Jäger">SJ</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Kreuzer">Xer</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Schlachtschiff">SS</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Bomber">B</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Zerstörer">Z</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Todesstern">DS</th>',n+='<th style="text-align: right; color: '+getRgb(cRed)+'" title="Schlachtkreuzer">SXer</th>',n+="</tr>",$.each(a,(function(e,t){i="Gesamt"===t.name?"font-weight: bold; padding-top: 5px; border-top: 1px solid "+getRgb(cRed)+"; color: "+getRgb(cRed):"",n+="<tr>",n+='<td style="text-align: left; '+i+'">'+t.name+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.score_military||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.small_transporters||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.large_transporters||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.coloy_ships||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.recyclers||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.spy_drones||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.solar_satellites||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.light_hunters||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.heavy_hunters||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.cruisers||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.battleships||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.bombers||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.destroyers||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.death_stars||"")+"</td>",n+='<td style="text-align: right; '+i+'">'+(t.battle_cruisers||"")+"</td>",n+="</tr>"})),n+="</table>",n+="</div>",e.container.html(n)}))},this.loadPageScore=function(){$("head").append('<script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>'),getJSON("hub/scores",(function(t){t=JSON.parse(t.responseText),e.container.html('<div class="infos text-left"><p style="padding-left: 10px"><i class="fa fa-info-circle"></i> <i>Relative Punkteänderung in % pro Kalenderwoche</i></p><canvas id="scoreChart" style="height: 500px; width: 100%"></canvas></div>');const a=t.dates;let i=[],n=["#bce4d8","#aedcd5","#a1d5d2","#95cecf","#89c8cc","#7ec1ca","#72bac6","#66b2c2","#59acbe","#4ba5ba","#419eb6","#3b96b2","#358ead","#3586a7","#347ea1","#32779b","#316f96","#2f6790","#2d608a","#2c5985"];for(let e=0;e<t.data.length;e++)i.push({label:t.data[e].name,data:t.data[e].score_relative,backgroundColor:t.data[e].me?"#ee4d2e":n[e%n.length],radius:1});new Chart(document.getElementById("scoreChart"),{type:"bar",data:{labels:a,datasets:i}}),e.container.append('<div class="infos text-left"><p style="padding-left: 10px"><i class="fa fa-info-circle"></i> <i>Absolute Punkteänderung pro Kalenderwoche</i></p><canvas id="scoreChart2" style="height: 500px; width: 100%"></canvas></div>'),i=[];for(let e=0;e<t.data.length;e++)i.push({label:t.data[e].name,data:t.data[e].score_diff,backgroundColor:t.data[e].me?"#ee4d2e":n[e%n.length],radius:1});new Chart(document.getElementById("scoreChart2"),{type:"bar",data:{labels:a,datasets:i}})}))},this.loadPageExpos=function(){let t="";getJSON("flights/stats",(function(a){a=JSON.parse(a.responseText),t='<div class="infos text-left">',t+='<table class="borderless" cellspacing="0">',t+="<tr>",t+='<tr><th colspan="7"><b>Eigene Statistik (gesamte Zeit)</b></th></tr>',t+='<th style="white-space: nowrap">Planet</th>',t+='<th style="white-space: nowrap" class="text-right">Letzte 24 Std</th>',t+='<th style="white-space: nowrap" class="text-right">Metall</th>',t+='<th style="white-space: nowrap" class="text-right">Kristall</th>',t+='<th style="white-space: nowrap" class="text-right">Deuterium</th>',t+='<th style="white-space: nowrap" class="text-right">Punkte</th>',t+="</tr>",$.each(a.own_stats,(function(e,a){t+="<tr>",t+='<td style="white-space: nowrap" class="text-left">'+e+"</td>",t+='<td style="white-space: nowrap" class="text-right">'+a.count_24+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.metal_diff)+'">'+a.metal_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.crystal_diff)+'">'+a.crystal_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.deuterium_diff)+'">'+a.deuterium_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.score_diff)+'">'+a.score_diff+"</td>",t+="</tr>"})),t+="</table>",t+='<small class="text-left" style="display: block; color: '+getRgb(cRed)+'; padding-top: 10px; margin-top: 10px; border-top: 1px solid #222">Flottenbewegungen werden nur erfasst, wenn sowohl während Hin- als auch Rückflug die Übersicht mit diesem Plugin geöffnet wurde. Metall/Kristall/Deuterium/Punkte berechnen den Ressourcengewinn, sowie Schiffsgewinn und -verlust (Produktionskosten) mit ein. Komplettverluste (depleted/black hole) sowie Expo-Abbrüche werden <u>NICHT</u> erfasst.</small>',t+="</div>",t+='<div class="infos text-left">',t+='<table class="borderless" cellspacing="0">',t+="<tr>",t+='<tr><th colspan="7"><b>Expos (letzte 24 Std)</b></th></tr>',t+='<th style="white-space: nowrap">Planet</th>',t+='<th style="white-space: nowrap" class="text-right">Letzte 24 Std</th>',t+='<th style="white-space: nowrap" class="text-right">Metall</th>',t+='<th style="white-space: nowrap" class="text-right">Kristall</th>',t+='<th style="white-space: nowrap" class="text-right">Deuterium</th>',t+='<th style="white-space: nowrap" class="text-right">Punkte</th>',t+="</tr>",$.each(a.stats_per_player,(function(e,a){t+="<tr>",t+='<td style="white-space: nowrap" class="text-left">'+a.name+"</td>",t+='<td style="white-space: nowrap" class="text-right">'+a.expeditions.count+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.expeditions.metal_diff)+'">'+a.expeditions.metal_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.expeditions.crystal_diff)+'">'+a.expeditions.crystal_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.expeditions.deuterium_diff)+'">'+a.expeditions.deuterium_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.expeditions.score_diff)+'">'+a.expeditions.score_diff+"</td>",t+="</tr>"})),t+="</table>",t+="</div>",t+='<div class="infos text-left">',t+='<table class="borderless" cellspacing="0">',t+="<tr>",t+='<tr><th colspan="7"><b>Raids (letzte 24 Std)</b></th></tr>',t+='<th style="white-space: nowrap">Planet</th>',t+='<th style="white-space: nowrap" class="text-right">Gesamt</th>',t+='<th style="white-space: nowrap" class="text-right">Metall</th>',t+='<th style="white-space: nowrap" class="text-right">Kristall</th>',t+='<th style="white-space: nowrap" class="text-right">Deuterium</th>',t+='<th style="white-space: nowrap" class="text-right">Punkte</th>',t+="</tr>",$.each(a.stats_per_player,(function(e,a){t+="<tr>",t+='<td style="white-space: nowrap" class="text-left">'+a.name+"</td>",t+='<td style="white-space: nowrap" class="text-right">'+a.raids.count+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.raids.metal_diff)+'">'+a.raids.metal_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.raids.crystal_diff)+'">'+a.raids.crystal_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.raids.deuterium_diff)+'">'+a.raids.deuterium_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.raids.score_diff)+'">'+a.raids.score_diff+"</td>",t+="</tr>"})),t+="</table>",t+="</div>",e.container.html(t)}))},this.loadPageGalaxy=function(){let t="";getJSON("hub/galaxy",(function(a){a=JSON.parse(a.responseText),t='<div class="infos text-left">',t+='<table class="borderless" cellspacing="0">',t+="<tr>",t+='<th style="white-space: nowrap; width: 10%">Galaxie</th>',t+='<th style="white-space: nowrap" class="text-right">Systeme 1-400</th>',t+="</tr>",$.each(a,(function(e,a){t+="<tr>",t+='<td style="white-space: nowrap" class="text-left">Galaxie '+e+"</td>",t+='<td style="white-space: nowrap" class="text-left">',t+='<div style="display: flex; width: 100%; justify-content: stretch">',$.each(a,(function(e,a){t+='<div title="System '+e+": "+(a.last_viewed_at||"---")+'" style="height: 25px; background: '+getColorAlt([92,184,92],a.intensity,[238,77,46])+'; min-width: 1px; flex-grow: 1"></div>'})),t+="</div>",t+="</td>",t+="</tr>"})),t+="</table>",t+='<small class="text-left" style="display: block; color: '+getRgb(cWhite)+'; padding-top: 10px; margin-top: 10px; border-top: 1px solid #222">Für jedes System wird ein schmaler Balken abgebildet. Die Farbe ist grün, sofern das System erst kürzlich angeschaut wurde und rot, wenn die letzte Überprüfung 7 Tage oder länger her ist. Das dargestellte System sowie Zeitpunkt der letzten Aktualisierung sind per Mouseover sichtbar.</small>',t+="</div>",e.container.html(t)}))},this.loadPageHostileSpying=function(){let t="";getJSON("hostile-spying",(function(a){a=JSON.parse(a.responseText),t+='<div class="infos text-left">',t+='<table class="borderless">',t+="<tr>",t+='<th class="text-left">Allianz</th>',t+='<th class="text-left">Spion</th>',t+='<th class="text-left">Koords</th>',t+='<th class="text-left">Ziel</th>',t+='<th class="text-left">Ziel Koords</th>',t+='<th class="text-left">Zeitpunkt</th>',t+="</tr>",$.each(a,(function(e,a){t+="<tr>",t+='<td class="text-left">'+(a.attacker_alliance||"---")+"</td>",t+='<td class="text-left">'+(a.attacker_name||"---")+"</td>",t+='<td class="text-left">'+a.planet_start_coordinates+"</td>",t+='<td class="text-left">'+a.target_name+"</td>",t+='<td class="text-left">'+a.planet_target_coordinates+"</td>",t+='<td class="text-left">'+a.timestamp+"</td>",t+="</tr>"})),t+="</table>",t+="</div>",e.container.html(t)}))},this.loadPageChangelog=function(){let t="";t+='<div class="infos text-left">',t+='<table class="borderless">',t+="<tr>",t+='<th class="text-right" style="widtH: 75px">Version</th>',t+='<th class="text-left" style="width: 150px">DateTime</th>',t+='<th class="text-left">Changes</th>',t+="</tr>",$.each(changelog,(function(e,a){t+="<tr>",t+='<td class="text-right" style="white-space: nowrap; color: '+getRgb(version===a.version?cGreen:cWhite)+'">'+a.version+"</td>",t+='<td class="text-left" style="white-space: nowrap; color: '+getRgb(version===a.version?cGreen:cWhite)+'">'+a.date_time+"</td>",t+='<td class="text-left" style="color: '+getRgb(version===a.version?cGreen:cWhite)+'">'+a.changes+"</td>",t+="</tr>"})),t+="</table>",t+='<p class="text-center text-green" style="padding-top: 10px">coded with <i class="fa fa-heart text-red"></i> by eichhorn/esKju</p>',t+="</div>",e.container.html(t)}}},419:()=>{window.PageMessages=function(){const e=$($("#messagestable > tbody > tr").get().reverse());let t,a,i,n,s,r,l,o,d,c,h,g,p,u,f;this.colors=new top.Colors;const m=this;this.init=function(){e.each((function(e,t){$(t).find(".spyRaport").length>0?m.parseSpyReport(e,t):$(t).hasClass("message_head")&&-1!==$($(t).find("td")[3]).html().search(/Spionage\-Aktivität/)?m.parseEnemySpying(e,t):$(t).find(".raportMessage").length>0?m.parseBattleReport(e,t):$(t).hasClass("message_head")&&-1!==$($(t).find("td")[3]).html().search(/Expeditionsbericht/)&&m.parseExpedition(e,t)}))},this.parseSpyReport=function(t,a){i=$(e[t-1]).find("td:nth-child(2)").html(),r=$(a).find(".spyRaportHead a").html(),l=r.match(/Spionagebericht von (.*) \[([0-9]+)\:([0-9]+)\:([0-9]+)\] am (.*)/,r),o=l[2],d=l[3],c=l[4],h=l[5],g=o+":"+d+":"+c,p=$(a).find(".spyRaportContainerRow .spyRaportContainerCell:nth-child(2n+1)"),u=$(a).find(".spyRaportContainerRow .spyRaportContainerCell:nth-child(2n)"),f={},p.each((function(e,t){f[($(t).find("a").attr("onclick")||"").match(/\(([0-9]+)\)/)[1]]=getInt($(u[e]).html())})),postJSON("spy-reports",{id:parseInt($(a).attr("class").match(/message\_([0-9]+)/)[1]),galaxy:parseInt(l[2]),system:parseInt(l[3]),planet:parseInt(l[4]),timestamp:l[5],resources:f},(function(e){}))},this.parseBattleReport=function(t,a){var i=$(a).html(),n=getCoordinates($(a).find(".raportMessage").html());postJSON("battle-reports",{report_id:i.match(/(raport|report)\=([^"]{32})/)[2],galaxy:parseInt(n[1]),system:parseInt(n[2]),planet:parseInt(n[3]),attacker_lost:getInt(i.match(/Angreifer\: ([\.0-9]+)\</)[1]),defender_lost:getInt(i.match(/Verteidiger\: ([\.0-9]+)\</)[1]),metal:getInt(i.match(/(reportSteal|raportSteal) element901\"\>([\.0-9]+)\</)[2]),crystal:getInt(i.match(/(reportSteal|raportSteal) element902\"\>([\.0-9]+)\</)[2]),deuterium:getInt(i.match(/(reportSteal|raportSteal) element903\"\>([\.0-9]+)\</)[2]),debris_metal:getInt(i.match(/(reportDebris|raportDebris) element901\"\>([\.0-9]+)\</)[2]),debris_crystal:getInt(i.match(/(reportDebris|raportDebris) element902\"\>([\.0-9]+)\</)[2]),timestamp:$(e[t+1]).find("td:nth-child(2)").html()},(function(e){}))},this.parseEnemySpying=function(t,n){a=$(n).attr("id").replace(/message\_/,""),i=$(n).hasClass("message_head")&&$($(n).find("td")[1]).html();const s=$($(e[t-1]).find("td")).html().match(/([0-9]+)\:([0-9]+)\:([0-9]+)/g);postJSON("hostile-spying",{external_id:a,date_time:i,planet_start_coordinates:s[0],planet_target_coordinates:s[1]},(function(){}))},this.parseExpedition=function(r,l){a=$(l).attr("id").replace(/message\_/,""),i=$(l).hasClass("message_head")&&$($(l).find("td")[1]).html(),$($(e[r-1]).find("td")).html($($(e[r-1]).find("td")).html().replace(/Logbuch Nachtrag des Kommunikationsoffiziers: Dieser Bereich des Universums ist wohl noch nicht erkundet worden./,'<span style="color: '+m.colors.green()+'"><i class="fa fa-check"></i></span> Logbuch Nachtrag des Kommunikationsoffiziers: Dieser Bereich des Universums ist wohl noch nicht erkundet worden.')),$($(e[r-1]).find("td")).html($($(e[r-1]).find("td")).html().replace(/Logbuch Nachtrag des Kommunikationsoffiziers: Es ist ein erhebendes Gefühl, der Erste in einem unerforschten Sektor zu sein./,'<span style="color: '+m.colors.green()+'"><i class="fa fa-check"></i></span> Logbuch Nachtrag des Kommunikationsoffiziers: Es ist ein erhebendes Gefühl, der Erste in einem unerforschten Sektor zu sein.')),$($(e[r-1]).find("td")).html($($(e[r-1]).find("td")).html().replace(/Logbuch Nachtrag des Kommunikationsoffiziers: Es scheint nicht so, als ob jemals ein Mensch in diesem Bereich der Galaxis gewesen wäre./,'<span style="color: '+m.colors.red()+'"><i class="fa fa-exclamation-triangle"></i> 25%</span> Logbuch Nachtrag des Kommunikationsoffiziers: Es scheint nicht so, als ob jemals ein Mensch in diesem Bereich der Galaxis gewesen wäre.')),$($(e[r-1]).find("td")).html($($(e[r-1]).find("td")).html().replace(/Logbuch Nachtrag des Kommunikationsoffiziers: Es wurden Anzeichen für die Präsenz anderer Expeditionsflotten gefunden./,'<span style="color: '+m.colors.red()+'"><i class="fa fa-exclamation-triangle"></i> 50%</span> Logbuch Nachtrag des Kommunikationsoffiziers: Es wurden Anzeichen für die Präsenz anderer Expeditionsflotten gefunden.')),$($(e[r-1]).find("td")).html($($(e[r-1]).find("td")).html().replace(/Logbuch Nachtrag des Kommunikationsoffiziers: Wenn wir uns zu unsicher fühlen, können wir uns ja mit all den anderen Expeditionen, die hier herum fliegen, zusammen tun./,'<span style="color: '+m.colors.red()+'"><i class="fa fa-exclamation-triangle"></i> 75%</span> Logbuch Nachtrag des Kommunikationsoffiziers: Wenn wir uns zu unsicher fühlen, können wir uns ja mit all den anderen Expeditionen, die hier herum fliegen, zusammen tun.')),t=$($(e[r-1]).find("td")).html(),n="UNKNOWN",s=null,(t.match(/Deine Expedition hat einen kleinen Asteroidenschwarm entdeckt, aus dem einige Ressourcen gewonnen werden können./)||t.match(/Auf einem abgelegenen Planetoiden wurden einige leicht zugängliche Ressourcenfelder gefunden und erfolgreich Rohstoffe gewonnen./)||t.match(/Deine Expedition stieß auf sehr alte Raumschiffwracks einer längst vergangenen Schlacht. Einzelne Komponenten konnte man bergen und recyceln./)||t.match(/Die Expedition stieß auf einen radioaktiv verstrahlten Planetoiden mit hochgiftiger Atmosphäre. Jedoch ergaben Scans, dass dieser Planetoid sehr rohstoffhaltig ist. Mittels automatischer Drohnen wurde versucht, ein Maximum an Rohstoffen zu gewinnen./))&&($($(l).find("td")[3]).html('<span class="badge badge-ress">Ress (klein)</span>'),n="RESOURCE",s="SMALL"),(t.match(/Deine Expedition fand einen uralten, voll beladenen, aber menschenleeren Frachterkonvoi. Einige Ressourcen konnten geborgen werden./)||t.match(/Auf einem kleinen Mond mit eigener Atmosphäre fand deine Expedition große Rohstoffvorkommen. Die Bodencrews sind dabei diese natürlichen Schätze zu heben./)||t.match(/Wir haben einen kleinen Konvoi ziviler Schiffe getroffen, die dringend Nahrung und Medikamente benötigten. Im Austausch dafür erhielten wir eine ganze Menge nützlicher Ressourcen./))&&($($(l).find("td")[3]).html('<span class="badge badge-ress">ress (mittel)</span>'),n="RESOURCE",s="MEDIUM"),(t.match(/Deine Expeditionsflotte meldet den Fund eines riesigen Alien-Schiffswracks. Mit der Technologie konnten sie zwar nichts anfangen, aber das Schiff ließ sich in seine Einzelteile zerlegen und dadurch konnte man wertvolle Rohstoffe gewinnen./)||t.match(/Ein Mineraliengürtel um einen unbekannten Planeten enthielt Unmengen an Rohstoffen. Die Expeditionsflotte meldet volle Lager!/))&&($($(l).find("td")[3]).html('<span class="badge badge-ress">ress (groß)</span>'),n="RESOURCE",s="LARGE"),(t.match(/Wir sind auf die Überreste einer Vorgängerexpedition gestoßen! Unsere Techniker schauen, ob sie einige der Wracks wieder Flugfähig bekommen/)||t.match(/Wir haben eine verlassene Piratenbasis gefunden. Im Hangar liegen noch einige alte Schiffe. Unsere Techniker schauen nach, ob einige davon noch zu gebrauchen sind./)||t.match(/Unsere Expedition fand einen Planeten, der wohl durch anhaltende Kriege fast komplett zerstört wurde. In der Umlaufbahn trieben diverse Schiffswracks. Die Techniker versuchen, einige davon zu reparieren. Vielleicht erhalten wir so auch Information darüber, was hier geschehen ist./)||t.match(/Deine Expedition ist auf eine alte Sternenfestung gestoßen, die wohl seit Ewigkeiten verlassen ist. Im Hangar der Festung wurden ein paar Schiffe gefunden. Die Techniker schauen, ob sie einige davon wieder flott bekommen./))&&($($(l).find("td")[3]).html('<span class="badge badge-ships">Schiffe (klein)</span>'),$($(e[r-1]).find("td")).html(t.replace(/([ a-zA-ZüöäÜÖÄß]+)\: ([.0-9]+)/g,'<span style="color: '+m.colors.red()+';">$1: $2</span>')),n="FLEET",s="SMALL"),(t.match(/Wir haben die Reste einer Armada gefunden. Die Techniker der Expeditionsflotte haben sich sofort auf die halbwegs intakten Schiffe begeben und versuchen, diese wieder instandzusetzen./)||t.match(/Unsere Expedition stieß auf eine alte, automatische Schiffswerft. Einige Schiffe sind noch in der Produktionsphase, und unsere Techniker versuchen, die Energieversorgung der Werft wiederherzustellen./))&&($($(l).find("td")[3]).html('<span class="badge badge-ships">Schiffe (mittel)</span>'),$($(e[r-1]).find("td")).html(t.replace(/([ a-zA-ZüöäÜÖÄß]+)\: ([.0-9]+)/g,'<span style="color: '+m.colors.red()+';">$1: $2</span>')),n="FLEET",s="MEDIUM"),(t.match(/Wir haben einen riesigen Raumschiffsfriedhof gefunden. Einigen Technikern der Expeditionsflotte ist es gelungen, das eine oder andere Schiff wieder in Betrieb zu nehmen./)||t.match(/Wir haben einen Planeten mit Resten einer Zivilisation entdeckt. Aus dem Orbit ist noch ein riesiger Raumbahnhof zu erkennen, der als einziges Gebäude noch intakt ist. Einige unserer Techniker und Piloten haben sich auf die Oberfläche begeben um nachzuschauen, ob ein paar der dort abgestellten Schiffe noch zu gebrauchen sind./))&&($($(l).find("td")[3]).html('<span class="badge badge-ships">Schiffe (groß)</span>'),$($(e[r-1]).find("td")).html(t.replace(/([ a-zA-ZüöäÜÖÄß]+)\: ([.0-9]+)/g,'<span style="color: '+m.colors.red()+';">$1: $2</span>')),n="FLEET",s="LARGE"),(t.match(/Außer einiger kurioser, kleiner Tierchen von einem unbekannten Sumpfplaneten, bringt diese Expedition nichts Aufregendes von ihrer Reise mit./)||t.match(/Deine Expedition hat wunderschöne Bilder einer Supernova gemacht. Wirklich neue Erkenntnisse hat diese Expedition jedoch nicht gebracht. Aber man hat gute Chancen auf den Bestes-Bild-Des-Universums-Wettbewerb in diesem Jahr./)||t.match(/Ein seltsames Computervirus legte kurz nach Verlassen des Sonnensystems die Navigation lahm. Dies führte dazu, dass die gesamte Expeditionsflotte die ganze Zeit im Kreis flog. Überflüssig zu sagen, dass die Expedition nicht besonders erfolgreich war./)||t.match(/Eine Lebensform aus reiner Energie hat dafür gesorgt, dass sämtliche Expeditionsmitglieder tagelang auf die hypnotischen Muster auf den Bildschirmen starrten. Als endlich die Meisten wieder klar im Kopf geworden waren, musste die Expedition aufgrund von akutem Deuterium-Mangel allerdings abgebrochen werden./)||t.match(/Nun, zumindest weiß man jetzt, dass rote Anomalien der Klasse 5 nicht nur chaotische Auswirkungen auf die Schiffssysteme haben, sondern auch massive Halluzinationen bei der Crew auslösen können. Viel mehr hat diese Expedition aber nicht gebracht./)||t.match(/Trotz der ersten, vielversprechenden Scans dieses Sektors kommen wir leider mit leeren Händen zurück./)||t.match(/Vielleicht hätte man den Geburtstag des Captains nicht auf diesem abgelegenen Planeten feiern sollen. Ein fieses Dschungelfieber hat große Teile der Crew gezwungen die Expedition in der Krankenstation zu begleiten. Der akute Personalausfall führte dazu, dass die Expedition scheiterte./)||t.match(/Deine Expedition hat, wortwörtlich, mit der Leere des Alls Bekanntschaft gemacht. Es gab nicht einmal einen kleinen Asteroiden, oder Strahlung, oder Partikel, oder irgendetwas, dass diese Expedition aufregend gestaltet hätte/)||t.match(/Ein Reaktorfehler des Führungsschiffes hätte beinahe die gesamte Expedition vernichtet. Zum Glück waren die Techniker mehr als fähig und konnten das Schlimmste verhindern. Die Reparatur nahm jedoch soviel Zeit in Anspruch, dass die Expedition unverrichteter Dinge wieder zurückkehrte./)||t.match(/Es konnten keine Schiffe repariert werden./))&&($($(l).find("td")[3]).html('<span class="badge badge-nothing">nichts</span>'),n="NOTHING",s=null),(t.match(/Eine unvorhergesehene Rückkopplung in den Energiespulen der Antriebsaggregate beschleunigte den Rücksprung der Expedition, so dass sie nun früher als erwartet zurückkehrt. Ersten Meldungen zufolge hat sie jedoch nichts Spannendes zu berichten./)||t.match(/Der etwas wagemutige neue Kommandant nutzte ein instabiles Wurmloch, um den Rückflug zu verkürzen – mit Erfolg! Jedoch hat die Expedition selbst keine neuen Erkenntnisse gebracht./)||t.match(/Deine Expedition meldet keinen Besonderheiten in dem erforschten Sektor. Jedoch geriet die Flotte beim Rücksprung in einen Sonnenwind. Dadurch wurde der Sprung ziemlich beschleunigt. Deine Expedition kehrt nun etwas früher nach Hause./))&&($($(l).find("td")[3]).html('<span class="badge badge-nothing">nichts (schnell)</span>'),n="NOTHING_FAST",s=null),(t.match(/Ein böser Patzer des Navigators führte zu einer Fehlkalkulation beim Sprung der Expedition. Nicht nur landete die Flotte an einem völlig falschen Ort, auch der Rückweg nahm nun erheblich mehr Zeit in Anspruch./)||t.match(/Aus bisher unbekannten Gründen, ging der Sprung der Expeditionsflotte völlig daneben. Beinahe wäre man im Herzen einer Sonne herausgekommen. Zum Glück ist man in einem bekannten System gelandet, jedoch wird der Rücksprung länger dauern als ursprünglich gedacht./)||t.match(/Das neue Navigationsmodul hat wohl doch noch mit einigen Bugs zu kämpfen. Nicht nur ging der Sprung der Expeditionsflotte in die völlig falsche Richtung, auch wurde das gesamte Deuterium verbraucht, wobei der Sprung der Flotte nur knapp hinter dem Mond des Startplaneten endete. Etwas enttäuscht kehrt die Expedition nun auf Impuls zurück. Dadurch wird die Rückkehr wohl ein wenig verzögert./)||t.match(/Deine Expedition geriet in einen Sektor mit verstärkten Partikelstürmen. Dadurch überluden sich die Energiespeicher der Flotte und bei sämtlichen Schiffen fielen die Hauptsysteme aus. Deine Mechaniker konnten das Schlimmste verhindern, jedoch wird die Expedition nun mit einiger Verspätung zurückkehren./)||t.match(/Das Führungsschiff deiner Expeditionsflotte kollidierte mit einem fremden Schiff, das ohne Vorwarnung direkt in die Flotte sprang. Das fremde Schiff explodierte und die Schäden am Führungsschiff waren beachtlich. Sobald die gröbsten Reparaturen abgeschlossen sind, werden sich deine Schiffe auf den Rückweg machen, da in diesem Zustand die Expedition nicht fortgeführt werden kann./)||t.match(/Der Sternwind eines roten Riesen verfälschte den Sprung der Expedition dermaßen, dass es einige Zeit dauerte, den Rücksprung zu berechnen. Davon abgesehen gab es in dem Sektor, in dem die Expedition herauskam, nichts außer der Leere zwischen den Sternen./))&&($($(l).find("td")[3]).html('<span class="badge badge-nothing">nichts (langsam)</span>'),n="NOTHING_SLOW",s=null),(t.match(/Ein paar anscheinend sehr verzweifelte Weltraumpiraten haben versucht, unsere Expeditionsflotte zu kapern./)||t.match(/Einige primitive Barbaren greifen uns mit Raumschiffen an, die nicht einmal ansatzweise die Bezeichnung Raumschiff verdient haben. Sollte der Beschuss ernst zu nehmende Ausmaße annehmen, sehen wir uns gezwungen das Feuer zu erwidern./)||t.match(/Wir haben ein paar Funksprüche sehr betrunkener Piraten aufgefangen. Anscheinend sollen wir überfallen werden./)||t.match(/Wir mussten uns gegen einige Piraten wehren, die zum Glück nicht allzu zahlreich waren./)||t.match(/Unsere Expeditionsflotte meldet, dass ein gewisser Moa Tikarr und seine wilde Meute die bedingungslose Kapitulation unserer Flotte verlangen. Sollten sie Ernst machen, werden sie feststellen müssen, dass sich unsere Schiffe durchaus zu wehren wissen./))&&($($(l).find("td")[3]).html('<span class="badge badge-fight">Piraten (klein)</span>'),n="PIRATES",s="SMALL"),(t.match(/Deine Expeditionsflotte hatte ein unschönes Zusammentreffen mit einigen Weltraumpiraten./)||t.match(/Wir sind in den Hinterhalt einiger Sternen-Freibeuter geraten! Ein Kampf war leider unvermeidlich./)||t.match(/Der Hilferuf, dem die Expedition folgte, stellte sich als böse Falle einiger arglistiger Sternen-Freibeuter heraus. Ein Gefecht war unvermeidlich./))&&($($(l).find("td")[3]).html('<span class="badge badge-fight">Piraten (mittel)</span>'),n="PIRATES",s="MEDIUM"),(t.match(/Die aufgefangenen Signale stammten nicht von Fremdwesen, sondern von einer geheimen Piratenbasis! Die Piraten waren von unserer Anwesenheit in ihrem Sektor nicht besonders begeistert./)||t.match(/Die Expeditionsflotte meldet schwere Kämpfe mit nicht-identifizierten Piratenschiffen!/)||t.match(/Wir haben gerade eine dringende Nachricht vom Expeditionskommandanten erhalten: "Sie kommen auf uns zu! Sie sind aus dem Hyperraum gesprungen, zum Glück sind es nur Piraten, wir haben also eine Chance, wir werden kämpfen!"/))&&($($(l).find("td")[3]).html('<span class="badge badge-fight">Piraten (groß)</span>'),n="PIRATES",s="LARGE"),(t.match(/Deine Expeditionsflotte hatte einen nicht besonders freundlichen Erstkontakt mit einer unbekannten Spezies./)||t.match(/Einige fremdartig anmutende Schiffe haben ohne Vorwarnung die Expeditionsflotte angegriffen!/)||t.match(/Unsere Expedition wurde von einer kleinen Gruppe unbekannter Schiffe angegriffen!/)||t.match(/Die Expeditionsflotte meldet Kontakt mit unbekannten Schiffen. Die Funksprüche sind nicht entschlüsselbar, jedoch scheinen die fremden Schiffe ihre Waffen zu aktivieren./))&&($($(l).find("td")[3]).html('<span class="badge badge-fight">Aliens (klein)</span>'),n="ALIENS",s="SMALL"),(t.match(/Eine unbekannte Spezies greift unsere Expedition an!/)||t.match(/Deine Expeditionsflotte hat anscheinend das Hoheitsgebiet einer bisher unbekannten, aber äußerst aggressiven und kriegerischen Alienrasse verletzt./)||t.match(/Die Verbindung zu unserer Expeditionsflotte wurde kurzfristig gestört. Soweit wir die letzte Botschaft richtig entschlüsselt haben, steht die Flotte unter schwerem Feuer – die Aggressoren konnten nicht identifiziert werden./))&&($($(l).find("td")[3]).html('<span class="badge badge-fight">Aliens (mittel)</span>'),n="ALIENS",s="MEDIUM"),(t.match(/Deine Expedition ist in eine Alien-Invasions-Flotte geraten und meldet schwere Gefechte!/)||t.match(/Ein großer Verband kristalliner Schiffe unbekannter Herkunft hält direkten Kollisionskurs mit unserer Expeditionsflotte. Wir müssen nun wohl vom Schlimmsten ausgehen./)||t.match(/Wir hatten ein wenig Schwierigkeiten, den Dialekt der fremden Rasse richtig auszusprechen. Unser Diplomat nannte versehentlich "Feuer!" statt "Frieden!"./))&&($($(l).find("td")[3]).html('<span class="badge badge-fight">Aliens (groß)</span>'),n="ALIENS",s="LARGE"),(t.match(/Von der Expedition ist nur noch folgender Funkspruch übrig geblieben: Zzzrrt Oh Gott! Krrrzzzzt das zrrrtrzt sieht krgzzzz ja aus wie Krzzzzzzzztzzzz.../)||t.match(/Das Letzte, was von dieser Expedition noch gesendet wurde, waren einige unglaublich gut gelungene Nahaufnahmen eines sich öffnenden, schwarzen Loches./)||t.match(/Ein Kernbruch des Führungsschiffes führte zu einer Kettenreaktion, die in einer durchaus spektakulären Explosion die gesamte Expedition vernichtete./)||t.match(/Die Expeditionsflotte ist nicht mehr aus dem Sprung in den Normalraum zurückgekehrt. Unsere Wissenschaftler rätseln noch immer, was geschehen sein könnte, jedoch scheint die Flotte endgültig verloren zu sein./))&&($($(l).find("td")[3]).html('<span class="badge badge-black-hole">Schwarzes Loch</span>'),n="BLACK_HOLE",s=null),postJSON("expeditions",{external_id:a,date_time:i,type:n,size:s,message:t},(function(){}))}}},896:()=>{window.PageOverview=function(){const e=this;this.isLoading=!1,this.cacheKey="overviewData",this.container=null,this.request=null,this.fleetQueue=[],this.init=function(){this.parseOwnAttacks(),this.prepareHtml(),this.analyzeFleetMovement(),this.renderHtml(),this.loadData(),this.bindHotkeys()},this.bindHotkeys=function(){const t={i:"filter_inactive",n:"filter_noobs",u:"filter_vacation",a:"filter_alliance",s:"filter_spy_report",k:"filter_battle_report"},a={p:"filter_score_enable",g:"filter_score_building_enable",f:"filter_score_science_enable",m:"filter_score_fleet_enable",v:"filter_score_defense_enable",i:"filter_inactive_since_enable",k:"filter_last_battle_report_enable",s:"filter_last_spy_report_enable",q:"filter_metal_enable",w:"filter_crystal_enable",e:"filter_deuterium_enable"};$(window).keypress((function(i){const n=i.key.toLowerCase();let s=null;if(0===$("*:focus").length){if(i.shiftKey)a[n]&&(s="0"===getValue(a[n])?"1":"0",setValue(a[n],s));else if(t[n]){switch(getValue(t[n])){case"HIDE":s="ONLY";break;case"ONLY":s="ALL";break;default:s="HIDE"}setValue(t[n],s)}e.renderHtml()}}))},this.setLoading=function(e){this.isLoading=e},this.prepareHtml=function(){let e;$($("content .infos")[1]).addClass("fleet-movement"),$($("content .infos")[1]).html($($("content .infos")[1]).html().replace(/\&nbsp\;/,"")),$("span.fleets").each((function(e,t){$(t).parent()&&$(t).parent().html($(t).parent().html().replace(/Eine deiner /,"").replace(/zum Planet/,"zu").replace(/vom Planet/,"von").replace(/von dem Planet/,"von").replace(/den Planet/,"").replace(/vom Spieler/,"von").replace(/ Eine/,"Eine").replace(/ist im Orbit/,"hält bei").replace(/(die|der) Position/,""))})),$("span.fleets").each((function(e,t){$(t).parent().html($(t).parent().html().replace(/Flotten/,"Flotte"))})),$("span.fleets").each((function(e,t){$(t).parent().html($(t).parent().html().replace(/\. Mission\: /,"</span><span>"))})),$("span.fleets").each((function(e,t){})),$("span.fleets").each((function(e,t){var a=new Date(1e3*$(t).attr("data-fleet-end-time"));$(t).parent().append(" <span>"+a.toLocaleTimeString("de-DE")+"</span>")})),e=$(".infos")[2].innerHTML.split("<br>");const t=Math.round((new Date).getTime()/1e3),a={building:$(".infos")[2].innerHTML.match(/Gebäude\: <\/a\>([^<>]+)\<br\>\<([^>]+)data\-time\=\"([0-9]+)\"/m),research:$(".infos")[2].innerHTML.match(/Forschung\: <\/a\>([^<>]+)\<br\>\<([^>]+)data\-time\=\"([0-9]+)\"/m),hangar:$(".infos")[2].innerHTML.match(/Schiffswerft\: <\/a\>([^<>]+)\<br\>\<([^>]+)data\-time\=\"([0-9]+)\"/m)};$.each(a,(function(e,a){setValue(ownGalaxy+":"+ownSystem+":"+ownPlanet+"_"+e+"_item",a?a[1]:""),setValue(ownGalaxy+":"+ownSystem+":"+ownPlanet+"_"+e+"_timestamp",a?t+parseInt(a[3]):"")}));const i={image:null,fieldsUsed:e.length>=6&&e[5].match(/bebaute Felder\"\>([0-9]+)\</),fieldsTotal:e.length>=6&&e[5].match(/bebaubare Felder\"\>([0-9]+)\</),temperatureMin:e.length>=7&&e[6].match(/von ([-0-9]+)\°/),temperatureMax:e.length>=7&&e[6].match(/bis ([-0-9]+)\°/)};setValue(ownGalaxy+":"+ownSystem+":"+ownPlanet+"_fieldsUsed",i.fieldsUsed?i.fieldsUsed[1]:""),setValue(ownGalaxy+":"+ownSystem+":"+ownPlanet+"_fieldsTotal",i.fieldsTotal?i.fieldsTotal[1]:""),setValue(ownGalaxy+":"+ownSystem+":"+ownPlanet+"_temperatureMin",i.temperatureMin?i.temperatureMin[1]:""),setValue(ownGalaxy+":"+ownSystem+":"+ownPlanet+"_temperatureMax",i.temperatureMax?i.temperatureMax[1]:""),$("content").addClass("home"),this.container=$(".infos:last-child"),$(".infos .planeto").remove(),e=$(".infos")[0].innerHTML.split("<br>");const n=e[1].split(/\:\:\&nbsp\;/);let s,r,l,o,d="";d+='<table class="borderless" style="padding: 0; margin: 0"><tr><td class="text-left" width="50%" style="padding: 0">',d+='<table class="borderless">',d+="<tr>",d+='<td class="text-left" width="10%">Serverzeit</td>',d+='<td class="text-left">'+e[0].replace(/Serverzeit \:/,"")+"</td>",d+="</tr>",d+="<tr>",d+='<td class="text-left">Admins</td>',d+='<td class="text-left">'+(n&&n.length>1?n[1]:"---").replace(/\&nbsp\;•/,",")+"</td>",d+="</tr>",d+="<tr>",d+='<td class="text-left">Punkte</td>',d+='<td class="text-left">'+e[3].replace(/Punkte /,"")+"</td>",d+="</tr>",d+="</table>",d+='<a style="margin-left: 12px; margin-top: 10px; color: #888; font-size: 10px;" href="javascript:void(0)" onclick="return Dialog.PlanetAction();">Planet umbenennen/aufgeben</a>',d+='</td><td style="padding: 0"><canvas id="playerChart" style="height: 100px; width: 100%"></canvas><canvas id="playerChartBar" style="height: 75px; width: 100%"></canvas></td></table>',$($(".infos")[0]).html(d),displayChart(),d='<table class="noMargin">',d+="<tr>",d+='<th width="20%">Planet</th>',d+='<th class="text-right">Gebäude</th>',d+='<th class="text-right">Forschung</th>',d+='<th class="text-right">Hangar</th>',d+='<th class="text-right">Metall</th>',d+='<th class="text-right">Kristall</th>',d+='<th class="text-right">Deuterium</th>',d+='<th class="text-right">Energie</th>',d+='<th class="text-right">Beobachtung</th>',d+="</tr>",$("#planetSelector option").each((function(e,t){s=getCoordinates(t.innerHTML),r=t.innerHTML.split("["),d+="<tr>",o="",l=getValue(s[1]+":"+s[2]+":"+s[3]+"_fieldsTotal"),value=getValue(s[1]+":"+s[2]+":"+s[3]+"_fieldsUsed"),o+=value&&"undefined"!==value&&""!==value?value:"---",o+=" / ",o+=(l&&"undefined"!==l&&""!==l?l:"---")+" Felder<br>",l=getValue(s[1]+":"+s[2]+":"+s[3]+"_temperatureMax"),value=getValue(s[1]+":"+s[2]+":"+s[3]+"_temperatureMin"),o+=value&&"undefined"!==value&&""!==value?value+"°C":"---",o+=" bis ",o+=l&&"undefined"!==l&&""!==l?l+"°C":"---",d+='<td class="text-left tooltip" data-tooltip-content="'+o+'">'+s[1]+":"+s[2]+":"+s[3]+" ("+r[0].replace(/ /g,"")+")</td>",l=getValue(s[1]+":"+s[2]+":"+s[3]+"_building_timestamp"),d+='<td class="text-right" title="'+(getValue(s[1]+":"+s[2]+":"+s[3]+"_building_item")||"---")+'">'+(l&&"undefined"!==l?'<span class="timer" data-time="'+(parseInt(l)-Math.round((new Date).getTime()/1e3))+'"></span>':"---")+"</td>",0===e?(l=getValue(s[1]+":"+s[2]+":"+s[3]+"_research_timestamp"),value=getValue(s[1]+":"+s[2]+":"+s[3]+"_research_item"),d+='<td class="text-right" title="'+(value&&"undefined"!==value&&""!==value?value:"---")+'">'+(l&&"undefined"!==l?'<span class="timer" data-time="'+(parseInt(l)-Math.round((new Date).getTime()/1e3))+'"></span>':"---")+"</td>"):d+='<td class="disabled text-right" style="color: #333">---</td>',l=getValue(s[1]+":"+s[2]+":"+s[3]+"_hangar_timestamp"),value=getValue(s[1]+":"+s[2]+":"+s[3]+"_hangar_item"),d+='<td class="text-right" title="'+(value&&"undefined"!==value&&""!==value?value:"---")+'">'+(l&&"undefined"!==l?'<span class="timer" data-time="'+(parseInt(l)-Math.round((new Date).getTime()/1e3))+'"></span>':"---")+"</td>",d+='<td class="text-right"><span data-tooltip-content="'+numberFormat(getInt(getValue(s[0]+"_production_metal"))/86400*3600)+" / Stunde<br>Limit: "+numberFormat(getInt(getValue(s[0]+"_limit_metal")))+'" class="tooltip ress_metal_'+s[0].replace(/\:/g,"_")+'"></span></td>',d+='<td class="text-right"><span data-tooltip-content="'+numberFormat(getInt(getValue(s[0]+"_production_crystal"))/86400*3600)+" / Stunde<br>Limit: "+numberFormat(getInt(getValue(s[0]+"_limit_crystal")))+'" class="tooltip ress_crystal_'+s[0].replace(/\:/g,"_")+'"></span></td>',d+='<td class="text-right"><span data-tooltip-content="'+numberFormat(getInt(getValue(s[0]+"_production_deuterium"))/86400*3600)+" / Stunde<br>Limit: "+numberFormat(getInt(getValue(s[0]+"_limit_deuterium")))+'" class="tooltip ress_deuterium_'+s[0].replace(/\:/g,"_")+'"></span></td>',d+='<td class="text-right" style="color: '+getRgb(parseInt(getValue(s[0]+"_production_energy"))>0?cGreen:cRed)+'">'+(getValue(s[0]+"_production_energy")||"---")+"</td>",dateTime=(new PlanetResourceNotification).getFinishTime(s[0]),dateTime?d+='<td class="text-right tooltip" colspan="2" data-tooltip-content="<b>Es fehlen:</b></br>'+(new PlanetResourceNotification).getDiffForResource(s[0],"metal")+" Metall, "+(new PlanetResourceNotification).getDiffForResource(s[0],"crystal")+" Kristall, "+(new PlanetResourceNotification).getDiffForResource(s[0],"deuterium")+' Deuterium"><i class="fa fa-bell-slash"  onclick="(new PlanetResourceNotification().removeNotification(\''+s[0]+'\'))"></i> <span class="notification-timer" data-timestamp="'+dateTime+'">'+formatTimeDiff(dateTime)+"</span></td>":(d+='<td class="text-right">---</td>',d+='<td class="text-right">---</td>'),d+="</tr>"})),d+="<tr>",d+='<td class="text-left">Summe</td>',d+='<td class="text-right" style="color: #888">---</td>',d+='<td class="text-right" style="color: #888">---</td>',d+='<td class="text-right" style="color: #888">---</td>',d+='<td class="text-right"><span id="sumMetal"></span> <small style="color: #888">/ <span id="sumLimitMetal"></span></small></td>',d+='<td class="text-right"><span id="sumCrystal"></span> <small style="color: #888">/ <span id="sumLimitCrystal"></span></small></td>',d+='<td class="text-right"><span id="sumDeuterium"></span> <small style="color: #888">/ <span id="sumLimitDeuterium"></span></small></td>',d+='<td class="text-right" style="color: #888">---</td>',d+='<td class="text-right" style="color: #888">---</td>',d+="</tr>",d+="</table>",$($(".infos")[2]).html(d)},this.checkVersion=function(){var e=this.getData();e&&isNewerVersionAvailable(e.version)&&$("body").prepend('<div style="padding: 10px 15px; background: '+getRgb(cRed)+"; color: "+getRgb(cWhite)+'; z-index: 10000; position: fixed; top: 0; left: 0; right: 0;" id="progress-bar"><i class="fa fa-exclamation-triangle"></i>  Eine neue Plugin-Version v<a href="https://pr0game-hub.eskju.net/download/releases/pr0game-hub.v'+e.version+'.js" target="_blank" download>'+e.version+"</a> ist verf&uuml;gbar.</div>")},this.parseOwnAttacks=function(){let t=null;$("#hidden-div2 > li > span:nth-child(2)").each((function(a,i){(i=$(i)).hasClass("ownattack")&&(t=$(i).find(".ownattack"),e.fleetQueue.push({from:$(t[1]).html().replace(/\[(.*)\]/,"$1"),to:$(t[2]).html().replace(/\[(.*)\]/,"$1"),type:i.attr("class"),time:$(i).parent().find("span.fleets")})),i.hasClass("ownespionage")&&(t=$(i).find(".ownespionage"),e.fleetQueue.push({from:$(t[1]).html().replace(/\[(.*)\]/,"$1"),to:$(t[2]).html().replace(/\[(.*)\]/,"$1"),type:i.attr("class"),time:$(i).parent().find("span.fleets")}))}))},this.loadData=function(){null!==this.request&&this.request.abort();const t=[];let a;$("#planetSelector option").each((function(e,i){a=getCoordinates(i.innerHTML),t.push(a[0])})),this.setLoading(!0),this.request=postJSON("players/overview",{galaxy:ownGalaxy,system:ownSystem,planet:ownPlanet,ownPlanets:t,show_galaxy:"1"===getValue("show_galaxy_enable")&&getValue("show_galaxy_value")||ownGalaxy,order_by:getValue("orderBy"),order_direction:getValue("orderDirection"),date_for_humans:"1"===(getValue("date_for_humans")||"0")},(function(t){setValue(e.cacheKey,t.responseText),e.setLoading(!1),e.checkVersion(),e.renderHtml()}))},this.getData=function(){var t=getValue(this.cacheKey);try{var a=e.sortData,i=JSON.parse(t);return i.players=i.players.sort(a),i}catch(e){return{players:[],outdated_ids:[],version,player:null}}},this.bindFilters=function(){$(".phFilter").each((function(e,t){$(t).on("change",(function(){"checkbox"===$(this).attr("type")?savePhOption($(this).attr("data-alias"),$(this)[0].checked?"1":"0"):savePhOption($(this).attr("data-alias"),$(this).val())}))}))},this.bindHeadlineSort=function(){$(".sortable").each((function(t,a){$(a).css("cursor","pointer"),$(a).attr("data-sort")==(getValue("orderBy")||"distance")&&("ASC"===(getValue("orderDirection")||"ASC")?$(a).prepend('<i class="fa fa-caret-up"></i> '):$(a).prepend('<i class="fa fa-caret-down"></i> ')),$(a).click((function(){e.orderBy($(a).attr("data-sort"),$(a).attr("data-direction")),e.renderHtml()}))}))},this.orderBy=function(e,t){e===getValue("orderBy")&&(t="ASC"===getValue("orderDirection")?"DESC":"ASC"),setValue("orderBy",e),setValue("orderDirection",t)},this.sortData=function(e,t){let a=getValue("orderBy")||"distance";const i="DESC"!==getValue("orderDirection")?1:-1,n=a.split(".");2===n.length&&(e=e[n[0]],t=t[n[0]],a=n[1]);let s=e[a]||"",r=t[a]||"";return"alliance_name"!==a&&"name"!==a?(s=getInt(s),r=getInt(r)):(s=s.toLowerCase(),r=r.toLowerCase()),(s<r?-1:s>r?1:0)*i},this.applyRowStyles=function(e){$(e.players).each((function(t,a){var i=$("#row"+a.id),n=$(i).find("td"),s=i.find("td a");e.player&&i.css(getPlayerRowStyle(a.player,e.player.score)),$(n[6]).css(getPlayerScoreStyle(a.player,e.player)),$(n[7]).css(getPlayerScoreStyle(a.player,e.player)),$(n[8]).css(getPlayerScoreBuildingStyle(a.player,e.player)),$(n[9]).css(getPlayerScoreScienceStyle(a.player,e.player)),$(n[10]).css(getPlayerScoreMilitaryStyle(a.player,e.player)),$(n[11]).css(getPlayerScoreDefenseStyle(a.player,e.player)),e.player&&s.css(getPlayerRowTdStyle(a.player,e.player.score,e.player)),e.player&&s.css(getPlayerRowTdStyle(a.player,e.player.score,e.player)),$("#lastSpyReport"+a.id).click((function(){getJSON("spy-reports/"+a.galaxy+"/"+a.system+"/"+a.planet,(function(e){e=JSON.parse(e.responseText),showSpyReportHistory(e)}))}))}))},this.bindSettingsLink=function(){$("#showSettings").click((function(){setValue("hideSettings","0"),$("#phSettings").show(),e.renderHtml()})),$("#hideSettings").click((function(){setValue("hideSettings","1"),$("#phSettings").show(),e.renderHtml()}))},this.bindSpyLinks=function(){$(".spio-link").click((function(){$.getJSON("game.php?page=fleetAjax&ajax=1&mission=6&planetID="+$(this).attr("data-id"),(function(e){showMessage(e.mess,600===e.code?"success":"danger")}))}))},this.checkUpdatableIds=function(e){e.outdated_ids.length>0&&3==ownGalaxy&&227==ownSystem&&10==ownPlanet&&(this.container.prepend('<button id="fetchMissingIdsBtn">Fetch '+e.outdated_ids.length+" outdated IDs</button>"),$("#fetchMissingIdsBtn").click((function(){playerUpdateQueue=e.outdated_ids,$("#fetchMissingIdsBtn").remove(),processQueue()})))},this.renderHtml=function(){var t='<table id="hubOverview" width="100%" style="max-width: 100% !important"><tr>',a=this.getData();if(updateConfigVars(),!a)return;t+='<th style="text-align: center;">#</th>',t+='<th class="sortable" data-sort="alliance_name" data-direction="ASC">Ally</th>',t+='<th class="sortable" data-sort="player.name" data-direction="ASC">Spieler</th>',t+='<th style="text-align: center;" colspan="3">',t+='<span class="sortable" data-sort="distance" title="Distanz" data-direction="ASC" id="sortByDistance"><i class="fa fa-map-marker-alt"></i></span>',t+="&nbsp;",t+='<span class="sortable" data-sort="system" title="System" data-direction="ASC" id="sortBySystem"><i class="fa fa-sort-numeric-down"></i></span>',t+="</th>",t+='<th class="sortable" data-sort="player.score" title="Punkte" data-direction="DESC" style="text-align: center; color: '+getRgb(cBlue)+'" id="sortByScore"><i class="fa fa-chart-line"></i></th>',t+='<th class="sortable" data-sort="diff" title="Punktedifferenz zum Vortag" data-direction="ASC" style="text-align: center; color: '+getRgb(cBlue)+'" id="sortByScoreDiff"><i class="fa fa-sort-numeric-up-alt"></i></th>',t+='<th class="sortable" data-sort="player.score_building" title="Gebaeudepunkte" data-direction="DESC" style="text-align: center; color: '+getRgb(cGreen)+'" id="sortByScoreBuilding"><i class="fa fa-industry"></i></th>',t+='<th class="sortable" data-sort="player.score_science" title="Forschungspunkte" data-direction="DESC" style="text-align: center; color: '+getRgb(cPink)+'" id="sortByScoreScience"><i class="fa fa-flask"></i></th>',t+='<th class="sortable" data-sort="player.score_military" title="Militaerpunkte" data-direction="DESC" style="text-align: center; color:'+getRgb(cRed)+'" id="sortByScoreMilitary"><i class="fa fa-fighter-jet"></i></th>',t+='<th class="sortable" data-sort="score_defense" title="Verteidigungspunkte" data-direction="DESC" style="text-align: center; color: '+getRgb(cYellow)+'" id="sortByScoreDefense"><i class="fa fa-shield"></i></th>',t+='<th class="sortable" data-sort="last_battle_report_hours" title="Letzter Angriff" data-direction="ASC" style="text-align: right;"><i class="fa fa-crosshairs"></i></th>',t+='<th class="sortable" data-sort="last_spy_report_hours" title="Letze Spionage" data-direction="DESC" style="text-align: right;"><i class="fa fa-user-secret"></i></th>',t+='<th style="text-align: center;">Actions</th>',t+='<th class="sortable" data-sort="last_spy_metal" data-direction="DESC" title="Metall (Letzte Spionage)" style="text-align: right;" id="sortBySpioMet">MET</th>',t+='<th class="sortable" data-sort="last_spy_crystal" data-direction="DESC" title="Kristall (Letzte Spionage)" style="text-align: right;" id="sortBySpioCry">CRY</th>',t+='<th class="sortable" data-sort="last_spy_deuterium" data-direction="DESC" title="Deuterium (Letzte Spionage)" style="text-align: right;" id="sortBySpioDeu">DEU</th></tr>',null!==a.player&&(ownPlayer=a.player);let i=0;$(a.players).each((function(n,s){if(filterTableRow(s,a.player)){i++,t+='<tr id="row'+s.id+'">',t+="<td>"+i+"</td>",t+='<td style="text-align: left; max-width: 50px"><div style="max-width: 50px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(s.alliance_name||"---")+"</div></td>",t+='<td style="text-align: left; max-width: 100px"><div style="max-width: 100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">',null!==s.inactive_since&&s.inactive_since<48&&(t+='<span style="padding: 2px 5px; border-radius: 2px; background: '+getRgb(cRed)+"; color: "+getRgb(cWhite)+'; border-radius: 2px; margin-right: 5px; font-size: 10px;">'+s.inactive_since+"H</span>"),t+='<a href="/game.php?page=playerCard&id='+s.player.id+'">'+s.player.name+"</a></div></td>",t+='<td id="row'+s.id+'Galaxy">'+(s.galaxy||"---")+"</td>",t+='<td id="row'+s.id+'System"><a href="/game.php?page=galaxy&galaxy='+(s.galaxy||"")+"&system="+(s.system||"")+'">'+(s.system||"---")+"</a></td>",t+='<td id="row'+s.id+'Planet">'+(s.planet||"---")+"</td>",t+='<td id="row'+s.id+'Score">'+numberFormat(s.player.score,!0)+"</td>",t+='<td id="row'+s.id+'ScoreDiff">'+numberFormat((s.diff&&s.diff>0?"+"+s.diff:s.diff)||"0",!0)+"</td>",t+='<td id="row'+s.id+'ScoreBuilding">'+numberFormat(s.player.score_building,!0)+"</td>",t+='<td id="row'+s.id+'ScoreScience">'+numberFormat(s.player.score_science,!0)+"</td>",t+='<td id="row'+s.id+'ScoreMilitary">'+numberFormat(s.player.score_military,!0)+"</td>",t+='<td id="row'+s.id+'ScoreDefense" title="Gesamt: '+(null!==s.player.score_defense?numberFormat(s.player.score_defense,!1):"???")+'">'+numberFormat(s.score_defense,!1)+"</td>",t+='<td style="text-align: right; white-space: nowrap">';var r=0;$.each(e.fleetQueue,(function(e,a){if(a.to==s.coordinates||a.from==s.coordinates)switch(a.type){case"flight ownattack":t+='<div style="text-align: center; background: '+getRgb(cRed)+"; margin-bottom: -1px; color: "+getRgb(cWhite)+'; border-radius: 2px; padding: 2px 5px; font-size: 10px;">'+a.time[0].outerHTML+"</div>",r++;break;case"return ownattack":t+='<div style="text-align: center; background: '+getRgb(cBlack)+"; color: "+getRgb(cRed)+"; outline: 1px solid "+getRgb(cRed)+'; outline-offset: -1px; border-radius: 2px; padding: 2px 5px; font-size: 10px;">'+a.time[0].outerHTML+"</div>",r++;break;case"flight ownespionage":t+='<div style="text-align: center; background: '+getRgb(cYellow)+"; margin-bottom: -1px; color: "+getRgb(cBlack)+'; border-radius: 2px; padding: 2px 5px; font-size: 10px;">'+a.time[0].outerHTML+"</div>",r++;break;case"return ownespionage":t+='<div style="text-align: center; background: '+getRgb(cBlack)+"; color: "+getRgb(cYellow)+"; outline: 1px solid "+getRgb(cYellow)+'; outline-offset: -1px; border-radius: 2px; padding: 2px 5px; font-size: 10px;">'+a.time[0].outerHTML+"</div>",r++}})),t+=0===r&&s.last_battle_report||"",t+=" </td>",t+='<td style="text-align: right; cursor: pointer; white-space: nowrap" id="lastSpyReport'+s.id+'">'+(s.last_spy_report||"")+"</td>",t+="<td>",s.external_id?t+='[<a class="spio-link" data-id="'+s.external_id+'" style="cursor: pointer">S</a>]':t+=' [<a style="color: #666" href="/game.php?page=fleetTable&galaxy='+s.galaxy+"&system="+s.system+"&planet="+s.planet+'&planettype=1&target_mission=6" style="cursor: pointer">S</a>]',t+=' [<a  href="/game.php?page=fleetTable&galaxy='+s.galaxy+"&system="+s.system+"&planet="+s.planet+'&planettype=1&target_mission=1" style="cursor: pointer">A</a>]',t+="</td>",t+='<td style="text-align: right;">'+numberFormat(s.last_spy_metal,!0)+"</td>",t+='<td style="text-align: right;">'+numberFormat(s.last_spy_crystal,!0)+"</td>";var l=Math.ceil(getInt(s.last_spy_metal)/2+getInt(s.last_spy_crystal)/2+getInt(s.last_spy_deuterium)/2);t+='<td style="text-align: right;" title="'+Math.ceil(l/5e3)+" KT, "+l+' raidable">'+numberFormat(s.last_spy_deuterium,!0)+"</td>",t+="</tr>"}})),this.container.html(getOverviewHeader()+t+"</table>"),this.bindFilters(),this.applyRowStyles(a),this.bindHeadlineSort(),this.bindSettingsLink(),this.bindSpyLinks(),this.checkUpdatableIds(a)},this.analyzeFleetMovement=function(){let t,a,i,n,s,r=[];$(".fleet-movement ul li").each((function(l,o){t=$($(o).children()),a=$(t[1]).html().match(/\[([:0-9]+)\](.*)\[([:0-9]+)\]/),i=$(t[0]).attr("id").replace(/fleettime\_/,""),n=i.substring(10,i.length),s=$(t[2]).find("a").length>0?$($(t[2]).find("a")).html():$(t[2]).html(),$(o).attr("id","fleet"+n+"-"+($(t[1]).hasClass("return")||-1!==$(t[1]).html().search(/hält bei/)?"1":"0")),a&&a.length>0&&r.push({external_id:n,is_return:$(t[1]).hasClass("return")||-1!==$(t[1]).html().search(/hält bei/),outbound_flight_id:$(t[1]).hasClass("return")||-1!==$(t[1]).html().search(/hält bei/)?n:null,timestamp_departure:null,timestamp_arrival:parseInt($(t[0]).attr("data-fleet-end-time")),type:s,planet_start_coordinates:a[1],planet_target_coordinates:a[3],resources:e.getResources($(t[2]).find("span.textForBlind")),ships:e.getShips($(t[1]).find("span.textForBlind"))})})),postJSON("flights",{activities:r},(function(e){let t,a,i,n;e=JSON.parse(e.responseText),$(".fleet-movement").append('<div style="border-top: 1px solid #222; border-bottom: 1px solid #222; padding: 10px 0; margin: 10px 0"><b>'+e.slots_used+" Slots genutzt</b></div>"),$.each(e.flights,(function(e,s){s.ships_diff&&(t='<table style="width: 250px">',$.each(s.ships_diff,(function(e,a){t+="<tr>",t+='<td class="text-left">'+e+"</td>",t+='<td class="text-right">'+a.after+"</td>",a.diff>0?t+='<td class="text-right text-green">+'+a.diff+"</td>":a.diff<0?t+='<td class="text-right text-red">'+a.diff+"</td>":t+='<td class="text-right text-gray">---</td>',t+="</tr>"})),t+="</table>",n=$("#fleet"+s.external_id+"-"+s.is_return+" > span:nth-child(2) a"),n.attr("data-tooltip-content",t)),s.resources_diff&&(t='<table style="width: 250px">',$.each(s.resources_diff,(function(e,a){t+="<tr>",t+='<td class="text-left">'+e+"</td>",t+='<td class="text-right">'+a.after+"</td>",a.diff>0?t+='<td class="text-right text-green">+'+a.diff+"</td>":a.diff<0?t+='<td class="text-right text-red">'+a.diff+"</td>":t+='<td class="text-right text-gray">---</td>',t+="</tr>"})),t+="</table>",n=$("#fleet"+s.external_id+"-"+s.is_return+" > span:nth-child(3) a"),n.attr("data-tooltip-content",t)),s.is_return&&(n=$("#fleet"+s.external_id+"-"+s.is_return+" > span:nth-child(2)").prepend('<i class="fa fa-backward"></i> ')),t='<span style="width: 4%" class="text-right">',t+='<a class="tooltip" data-tooltip-content="'+escape(a)+'">',a='<table style="width: 700px; border: 1px solid rgba(255, 255, 255, 0.25); box-shadow: 0 0 10px rgba(0, 0, 0, 0.5)" cellspacing="0">',a+="<tr>",a+='<th class="text-left">&nbsp;</th>',a+='<th class="text-right">Anzahl</th>',a+='<th class="text-right">Differenz</th>',a+='<th class="text-right">Metall</th>',a+='<th class="text-right">Kristall</th>',a+='<th class="text-right">Deuterium</th>',a+='<th class="text-right">Punkte</th>',a+="</tr>",s.resources_diff&&(i=0,$.each(s.resources_diff,(function(e,t){a+="<tr>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-left">'+e+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right">'+t.after+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.diff)+'">'+t.diff+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.metal)+'">'+t.metal+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.crystal)+'">'+t.crystal+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.deuterium)+'">'+t.deuterium+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.score)+'">'+t.score+"</td>",a+="</tr>",i++}))),s.ships_diff&&(i=0,$.each(s.ships_diff,(function(e,t){a+="<tr>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-left">'+e+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right">'+t.after+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.diff)+'">'+t.diff+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.metal)+'">'+t.metal+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.crystal)+'">'+t.crystal+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.deuterium)+'">'+t.deuterium+"</td>",a+='<td style="'+(0===i?"border-top: 1px dashed "+getRgb(cGray):"")+'" class="text-right '+getStyle(t.score)+'">'+t.score+"</td>",a+="</tr>",i++}))),a+="<tr>",a+='<th style="border-top: 1px dashed '+getRgb(cGray)+'" class="text-left"><b>Gesamt</b></th>',a+='<th style="border-top: 1px dashed '+getRgb(cGray)+'" class="text-right text-gray">---</th>',a+='<th style="border-top: 1px dashed '+getRgb(cGray)+'" class="text-right text-gray"></th>',a+='<th style="border-top: 1px dashed '+getRgb(cGray)+'" class="text-right '+getStyle(s.metal_diff)+'">'+s.metal_diff+"</th>",a+='<th style="border-top: 1px dashed '+getRgb(cGray)+'" class="text-right '+getStyle(s.crystal_diff)+'">'+s.crystal_diff+"</th>",a+='<th style="border-top: 1px dashed '+getRgb(cGray)+'" class="text-right '+getStyle(s.deuterium_diff)+'">'+s.deuterium_diff+"</th>",a+='<th style="border-top: 1px dashed '+getRgb(cGray)+'" class="text-right '+getStyle(s.score_diff)+'">'+s.score_diff+"</th>",a+="</tr>",a+="</table>",s.is_return?getInt(s.score_diff)>0?t+='<span class="text-green">+'+s.score_diff+"</span>":0===getInt(s.score_diff)?t+='<span style="color: #444"><small>+/-</small> 0</span>':t+='<span class="text-red">'+s.score_diff+"</span>":t+='<span style="color: #444">---</span>',t+="</a>",t+="</span>",$("#fleet"+s.external_id+"-"+s.is_return).append(t),$("#fleet"+s.external_id+"-"+s.is_return+" span:last-child a.tooltip").attr("data-tooltip-content",a)})),t='<table class="borderless" style="padding: 0; margin: 0"><tr><td width="50%" style="padding: 0" >',t+="<tr>",t+='<th style="white-space: nowrap">Planet</th>',t+='<th style="white-space: nowrap" class="text-right">Letzte 24 Std</th>',t+='<th style="white-space: nowrap" class="text-right">Metall</th>',t+='<th style="white-space: nowrap" class="text-right">Kristall</th>',t+='<th style="white-space: nowrap" class="text-right">Deuterium</th>',t+='<th style="white-space: nowrap" class="text-right">Punkte</th>',t+="</tr>",$.each(e.expeditions,(function(e,a){t+="<tr>",t+='<td style="white-space: nowrap" class="text-left">'+e+"</td>",t+='<td style="white-space: nowrap" class="text-right">'+a.count_24+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.metal_diff)+'">'+a.metal_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.crystal_diff)+'">'+a.crystal_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.deuterium_diff)+'">'+a.deuterium_diff+"</td>",t+='<td style="white-space: nowrap" class="text-right '+getStyle(a.score_diff)+'">'+a.score_diff+"</td>",t+="</tr>"})),t+="</table>",t+='<small class="text-left" style="display: block; color: '+getRgb(cRed)+'; padding-top: 10px; margin-top: 10px; border-top: 1px solid #222">Flottenbewegungen werden nur erfasst, wenn sowohl während Hin- als auch Rückflug die Übersicht mit diesem Plugin geöffnet wurde. Metall/Kristall/Deuterium/Punkte berechnen den Ressourcengewinn, sowie Schiffsgewinn und -verlust (Produktionskosten) mit ein. Komplettverluste (depleted/black hole) sowie Expo-Abbrüche werden <u>NICHT</u> erfasst.</small>',$(".fleet-movement").append(t)}))},this.getResources=function(e){if(0===e.length)return[];const t=$(e).html().match(/([.0-9]+) Metall\; ([.0-9]+) Kristall\; ([.0-9]+) Deuterium/);return{metal:t[1],crystal:t[2],deuterium:t[3]}},this.getShips=function(e){if(0===e.length)return[];const t={},a=$(e).html().replace(/([\(\)]+)/g,"").split(/;/);let i;return $.each(a,(function(e,a){i=a.match(/([0-9]+) (.*)$/),i&&i.length>=3&&(t[i[2]]=i[1])})),t}}},524:()=>{window.parsePagePlayerCard=function(){var e=window.location.href.match(/[\?\&]id=([(0-9]+)/i)[1];if($("body").html().match(/\/includes\/pages\/game\/ShowPlayerCardPage\.class\.php/))postJSON("players/"+e+"/delete",{},(function(){}));else{var t=($("#content tr:nth-child(4) a").attr("onclick")||"").match(/\&id\=([0-9]+)/);postJSON("players/"+e,{name:$("#content tr:nth-child(2) td:nth-child(2)").html(),alliance_id:t?t[1]:null,alliance_name:$("#content tr:nth-child(4) a").html()||null,main_coordinates:$("#content tr:nth-child(3) a").html().replace(/\[(.*)\]/,"$1"),score_building:getInt($("#content tr:nth-child(6) td:nth-child(2)").html()),score_science:getInt($("#content tr:nth-child(7) td:nth-child(2)").html()),score_military:getInt($("#content tr:nth-child(8) td:nth-child(2)").html()),score_defense:getInt($("#content tr:nth-child(9) td:nth-child(2)").html()),score:getInt($("#content tr:nth-child(10) td:nth-child(2)").html()),combats_won:getInt($("#content tr:nth-child(13) td:nth-child(2)").html()),combats_draw:getInt($("#content tr:nth-child(14) td:nth-child(2)").html()),combats_lost:getInt($("#content tr:nth-child(15) td:nth-child(2)").html()),combats_total:getInt($("#content tr:nth-child(16) td:nth-child(2)").html()),units_shot:getInt($("#content tr:nth-child(18) td:nth-child(2)").html()),units_lost:getInt($("#content tr:nth-child(19) td:nth-child(2)").html()),rubble_metal:getInt($("#content tr:nth-child(20) td:nth-child(2)").html()),rubble_crystal:getInt($("#content tr:nth-child(21) td:nth-child(2)").html())},(function(e){}));var a=$("table");a.append('<tr><th colspan="3">Planeten</th></tr>'),getJSON("players/"+e+"/planets",(function(e){200===e.status&&$.each(JSON.parse(e.responseText),(function(e,t){a.append('<tr><td colspan="3" style="text-align: left">'+t.coordinates+"</td></tr>")}))})),$("#content").append('<canvas id="playerChart" style="width: 95%; margin: 15px auto; height: 300px"></canvas>'),$("#content").append('<canvas id="playerChartBar" style="width: 95%; margin: 15px auto; height: 100px"></canvas>'),displayChart(e)}}},789:()=>{window.PageResearch=function(){const e=this;this.data=[],this.convertHtml=function(){$("content").addClass("research"),$(".infos, .infoso").each((function(t,a){$(a).addClass("building"),$($(a).find("div:nth-child(2)")).addClass("building-left"),$($(a).find("div:nth-child(3)")).addClass("building-right"),e.disableButtons($($(a).find("div:nth-child(3)"))),e.changeBuildTimeStyle($($(a).find("div:nth-child(3)")))})),$("content").html($("content").html().replace(/\(Stufe ([0-9]+)\)/g,'<br><span class="highlight">Stufe $1</span><br>'))},this.init=function(){const t=[];let a,i;this.convertHtml(),$(".buildn").each((function(e,n){a=$(n).html().match(/\.info\(([0-9]+)\)\"\>([^<]+)\<\/a\>/),i=$(n).html().match(/Stufe ([0-9]+)/),t.push({research_id:getInt(a[1]),level:i?getInt(i[1]):0})})),postJSON("players/research",{research:t},(function(t){e.data=JSON.parse(t.responseText),$(".buildn").each((function(t,i){a=$(i).html().match(/\.info\(([0-9]+)\)\"\>([^<]+)\<\/a\>/),$(i).append("Max: "+e.data[a[1]].max_level),e.data[a[1]].max_level>0&&$(i).append('<div class="player_names">'+e.data[a[1]].player_names.replace(/,/g,", ")+"</div>")}))}))},this.disableButtons=function(t){if($(t).find(".text-red").length>0){$($(t).find(".build_submit")).addClass("text-gray"),$(t).parent().addClass("fade-"+(0===$(t).find(".build_submit").length?"25":"75"));let a=$($(t).parent().find(".building-right")),i=$(a.find("> span:first-child")).html(),n=ownGalaxy+":"+ownSystem+":"+ownPlanet,s=$($(t).parent().find(".buildn > a")).attr("onclick").match(/\(([0-9]+)\)/)[1],r=e.getCost("Metall",i),l=e.getCost("Kristall",i),o=e.getCost("Deuterium",i);if((new PlanetResourceNotification).hasNotification(n,s)){const e=(new PlanetResourceNotification).getFinishTime(n);a.append("<br><button onclick=\"(new PlanetResourceNotification().removeNotification('"+n+'\'))" style="color: '+getRgb(cRed)+'"><i class="fa fa-bell-slash"></i> baubar in <span class="notification-timer" data-timestamp="'+e+'">'+formatTimeDiff(e)+"</span></button>")}else a.append("<br><button onclick=\"(new PlanetResourceNotification().addNotification('"+n+"', '"+s+"',"+r+","+l+","+o+'))" style="color: '+getRgb(cGreen)+'"><i class="fa fa-bell"></i> benachrichtigen, wenn baubar</button>')}window.setInterval((function(){$(".notification-timer").each((function(){$(this).text(formatTimeDiff($(this).attr("data-timestamp")))}))}),1e3)},this.changeBuildTimeStyle=function(e){$(e).html($(e).html().replace(/(.*)Bauzeit\:(.*)/,'$1<span class="text-gray">Bauzeit: $2</span>'))},this.getCost=function(e,t){let a;switch(e){case"Metall":a=t.match(/\<a (.*)\>(Metall)\<\/a\>(.*)\<b(.*)\<span(.*)\>([.0-9]+)\<\//);break;case"Kristall":a=t.match(/\<a (.*)\>(Kristall)\<\/a\>(.*)\<b(.*)\<span(.*)\>([.0-9]+)\<\//);break;case"Deuterium":a=t.match(/\<a (.*)\>(Deuterium)\<\/a\>(.*)\<b(.*)\<span(.*)\>([.0-9]+)\<\//)}return a?getInt(a[6]):0}}},658:()=>{window.PageResources=function(){const e=this;this.init=function(){this.parseLines($("content table tr"))},this.parseLines=function(t){let a;$.each(t,(function(t,i){switch(a=0===$($(i).find("td")[0]).find("a").length?$($(i).find("td")[0]).html():$($(i).find("td > a")[0]).html(),a){case"Lagerkapazität":setValue(ownCoords[0]+"_limit_metal",e.parseCapacity($($($(i).find("td")[1]).find("span")).html())),setValue(ownCoords[0]+"_limit_crystal",e.parseCapacity($($($(i).find("td")[2]).find("span")).html())),setValue(ownCoords[0]+"_limit_deuterium",e.parseCapacity($($($(i).find("td")[3]).find("span")).html()));break;case"Pro Tag":setValue(ownCoords[0]+"_production_metal",getInt($($($(i).find("td")[1]).find("span")).html()).toString()),setValue(ownCoords[0]+"_production_crystal",getInt($($($(i).find("td")[2]).find("span")).html()).toString()),setValue(ownCoords[0]+"_production_deuterium",getInt($($($(i).find("td")[3]).find("span")).html()).toString()),setValue(ownCoords[0]+"_production_energy",getInt($($($(i).find("td")[4]).find("span")).html()).toString())}}))},this.parseCapacity=function(e){let t=0;return-1!==e.search(/K/)&&(t=1e3),-1!==e.search(/M/)&&(t=1e6),getInt(e)*t}}},577:()=>{window.parsePageStatistics=function(){var e=[],t=[],a=[];$(".table519:nth-child(2) tr").each((function(i,n){if(i>0){var s=parseInt($(n).find("td:nth-child(2) a").attr("onclick").replace(/return Dialog\.Playercard\((.*)\, (.*)\);/,"$1"));e.push(s),$(n).attr("id","row"+s),$(n).find("td:nth-child(2) .galaxy-short-inactive").length>0&&t.push(s),$(n).find("td:nth-child(2) .galaxy-short-vacation").length>0&&a.push(s)}else $(n).append("<th>Koords</th>"),$(n).append("<th>B</th>"),$(n).append("<th>S</th>"),$(n).append("<th>M</th>"),$(n).append("<th>D</th>")})),postJSON("players/stats",{ids:e,inactive_ids:t,vacation_ids:a,order_by:getValue("orderBy")},(function(e){e=JSON.parse(e.responseText),$(e.players).each((function(t,a){var i=$("#row"+a.id);i.append('<td id="row'+a.id+'Coordinates">'+(a.main_coordinates||"---")+"</td>"),i.append('<td id="row'+a.id+'ScoreBuilding">'+(a.score_building||"")+"</td>"),i.append('<td id="row'+a.id+'ScoreScience">'+(a.score_science||"")+"</td>"),i.append('<td id="row'+a.id+'ScoreMilitary">'+(a.score_military||"")+"</td>"),i.append('<td id="row'+a.id+'ScoreDefense">'+(a.score_defense||"")+"</td>"),i.css(getPlayerRowStyle(a)),$("#row"+a.id+" td:nth-child(5)").css(getPlayerScoreStyle(a,e.player)),$("#row"+a.id+"ScoreBuilding").css(getPlayerScoreBuildingStyle(a,e.player)),$("#row"+a.id+"ScoreScience").css(getPlayerScoreScienceStyle(a,e.player)),$("#row"+a.id+"ScoreMilitary").css(getPlayerScoreMilitaryStyle(a,e.player)),$("#row"+a.id+"ScoreDefense").css(getPlayerScoreDefenseStyle(a,e.player))})),e.missing_ids.length>0&&3==ownGalaxy&&227==ownSystem&&($("content").prepend('<button id="fetchMissingIdsBtn">Fetch '+e.missing_ids.length+" missing IDs</button>"),$("#fetchMissingIdsBtn").click((function(){playerUpdateQueue=e.missing_ids,$("#fetchMissingIdsBtn").remove(),processQueue()}))),e.outdated_ids.length>0&&3==ownGalaxy&&227==ownSystem&&($("content").prepend('<button id="fetchUpdatableIdsBtn">Fetch '+e.outdated_ids.length+" outdated IDs</button>"),$("#fetchUpdatableIdsBtn").click((function(){playerUpdateQueue=e.outdated_ids,$("#fetchMissingIdsBtn").remove(),processQueue()})))}))}},34:()=>{window.processQueue=function(){if(playerUpdateQueue.length>0){getProgressBar().html("Updating "+playerUpdateQueue.length+" items ...");var e=playerUpdateQueue.shift();$("content").append('<iframe class="player-iframe" id="iframe'+e+'" width="1" height="1" src="/game.php?page=playerCard&id='+e+'"></iframe>'),$("#iframe"+e).animate({left:0},200,(function(){$("iframe").length>=10&&$($("iframe")[0]).remove(),$("#row"+e+" > td").css({backgroundColor:"green"}),processQueue()}))}else getProgressBar().html("Save & reload"),$("body").animate({opacity:0},1e3,(function(){window.location.reload()}))}},683:()=>{window.getProgressBar=function(){const e=$("#progress-bar");return 1===e.length?e:($("body").prepend('<div style="padding: 10px 15px; background: '+getRgb(cBlue)+"; color: "+getRgb(cWhite)+'; z-index: 10000; position: fixed; top: 0; left: 0; right: 0;" id="progress-bar"></div>'),$("#progress-bar"))}},545:()=>{window.displayAllianceChart=function(e){$("head").append('<script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>'),getJSON("alliances/"+e+"/chart",(function(e){const t=JSON.parse(e.responseText),a=t.dates,i=t.players,n=[],s=["red","orange","yellow","green","blue","indigo","violette","white","lightgreen","lightblue"];for(let e=0;e<t.datasets.length;e++)n.push({label:i[e],data:t.datasets[e],borderColor:s[e%s.length],borderWidth:1,radius:1});$("content").append('<canvas id="chart" style="width: 95%; margin: 15px auto; height: 500px"></canvas>'),$("body").animate({opacity:1},500,(function(){new Chart(document.getElementById("chart"),{type:"line",data:{labels:a,datasets:n},options:{scales:{x:{}},plugins:{legend:{}}}})}))}))}},977:()=>{window.displayChart=function(e){$("head").append('<script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>'),getJSON("players"+(e?"/"+e:"")+"/chart",(function(t){const a=JSON.parse(t.responseText),i=[],n=[],s=[],r=[],l=[],o=[],d=[],c=[],h=[];$.each(a,(function(e,t){i.push(e),n.push(t.own_score),s.push(t.score_max),r.push(t.score_relative),l.push(t.score_diff),o.push(t.score_building),d.push(t.score_science),c.push(t.score_military),h.push(t.score_defense)})),$("body").animate({opacity:1},500,(function(){new Chart(document.getElementById("playerChart"),{type:"line",data:{labels:i,datasets:[{label:"Punkte",data:s,borderColor:"#008fff",borderWidth:2,radius:2},{label:"Eigene Punkte",data:n,borderColor:"#ffffff",borderWidth:1,borderDash:[5,5],radius:1},{label:"Gebäude",data:o,borderColor:"#addc8d",borderWidth:1,borderDash:[2,2],radius:2},{label:"Forschung",data:d,borderColor:"#843bff",borderWidth:1,borderDash:[2,2],radius:2},{label:"Militär",data:c,borderColor:"#c52b2f",borderWidth:1,borderDash:[2,2],radius:2},{label:"Verteidigung",data:h,borderColor:"#ffc166",borderWidth:1,borderDash:[2,2],radius:2}]},options:{scales:{x:{display:void 0!==e}},plugins:{legend:{display:void 0!==e}}}}),new Chart(document.getElementById("playerChartBar"),{data:{labels:r,datasets:[{type:"bar",label:"Punktedifferenz relativ (in %)",yAxisID:"y",data:r,backgroundColor:function(e){var t=e.dataIndex;return e.dataset.data[t]<0?"#ee4d2e":"#addc8d"}},{type:"line",label:"Punktedifferenz absolut",yAxisID:"y2",data:l,pointRadius:0,borderWidth:2,borderColor:"#888888"}]},options:{scales:{x:{display:!1},y:{type:"linear",position:"left"},y2:{type:"linear",position:"right"}},plugins:{legend:{display:!1}}}})}))}))}},795:()=>{window.displayOverviewHighlight=function(e,t,a,i="Schwellwert"){let n="<tr>";return n+='<td width="50%" style="text-align: left; color: '+getRgb(a)+'">'+e+"</td>",n+='<td width="4%">',n+='<input id="'+t+'" class="phFilter" data-alias="'+t+'_enable" value="1" type="checkbox" '+("1"===getValue(t+"_enable")?"checked":"")+">",n+="</td>",n+='<td width="46%" colspan="2">',n+='<input id="'+t+'_value" class="phFilter" data-alias="'+t+'_value" style="width: 100%" placeholder="'+i+'" value="'+(getValue(t+"_value")||"")+'">',n+="</td>",n+="</tr>",n}},826:()=>{window.displayOverviewSettingsRange=function(e,t){let a="<tr>";return a+='<td width="50%" style="text-align: left">'+e+"</td>",a+='<td width="4%">',a+='<input id="'+t+'_enable" class="phFilter" data-alias="'+t+'_enable" value="1" type="checkbox" '+("1"===getValue(t+"_enable")?"checked":"")+">",a+="</td>",a+='<td width="23%">',a+='<input id="'+t+'_min" class="phFilter" data-alias="'+t+'_min" style="width: 100%" placeholder="min" value="'+(getValue(t+"_min")||"")+'">',a+="</td>",a+='<td width="23%">',a+='<input id="'+t+'_max" class="phFilter" data-alias="'+t+'_max" style="width: 100%" placeholder="max" value="'+(getValue(t+"_max")||"")+'">',a+="</td>",a}},261:()=>{window.displayOverviewSettingsSelect=function(e,t,a){let i="<tr>";return i+='<td width="50%" style="text-align: left">'+e+"</td>",i+='<td colspan="3">',i+='<select id="'+t+'_select" class="phFilter" data-alias="'+t+'" style="width: 100%">',$.each(a,(function(e,a){i+='<option value="'+e+'" '+(getValue(t)===e?"selected":"")+">"+a+"</option>"})),i+="</select>",i+="</td>",i}},679:()=>{window.displayOverviewSettings=function(){let e="";return e+='<table id="phSettings" width="100%" style="max-width: 100% !important; '+("1"===getValue("hideSettings")?"display: none":"")+'" class="table519">',e+='<tr><th colspan="4">API</th></tr>',e+='<tr><td colspan="4"><p style="font-size: 11px; text-align: left;">Solltest Du keinen API Key besitzen, wende Dich bitte per Discord an @eichhorn#1526.<br><b style="color: '+getRgb(cRed)+'">Gib Deinen API Key nicht an andere weiter!</b></p></td></tr>',e+="<tr>",e+='<td width="50%" style="text-align: left">API Key</td>',e+='<td colspan="3"><input class="phFilter" data-alias="api_key" type="text" style="width: 100%" placeholder="API Key" value="'+(getValue("api_key")||"")+'"></td>',e+="<tr>",e+='<td width="50%" style="text-align: left">Debug-Modus</td>',e+='<td><input type="checkbox" class="phFilter" data-alias="debug_mode" value="1" '+("1"===getValue("debug_mode")?"checked":"")+'></td><td colspan="2" style="text-align: left; color: #888">Zeige Infos in der Konsole</td>',e+="<tr>",e+='<td width="50%" style="text-align: left">Developer-Modus</td>',e+='<td><input type="checkbox" class="phFilter" data-alias="developer_mode" value="1" '+("1"===getValue("developer_mode")?"checked":"")+'></td><td colspan="2" style="text-align: left; color: #888">Nutzt die Entwickler-API (nur zum Coden!)</td>',e+="<tr>",e+='<td width="50%" style="text-align: left">Leserliches Datumsformat</td>',e+='<td><input type="checkbox" class="phFilter" data-alias="date_for_humans" value="1" '+("1"===getValue("date_for_humans")?"checked":"")+'></td><td colspan="2" style="text-align: left; color: #888">z.B. "vor 5min" statt Datum/Uhrzeit. Erfordert Reload (F5)!</td>',e+='<tr><th colspan="4">HIGHLIGHTING</th></tr>',e+='<tr><td colspan="4"><p style="font-size: 11px; text-align: left;">Standardmäßig werden die Spielerwerte als Referenz genommen; Für Galaxie/System/Planet wird standardmäßig der aktive Planet gesetzt. Ist die Checkbox angehakt, wird der jeweilige Wert vom Eingetragenen überschrieben. Die Spieler-Werte werden in der Farbskala weiß (0 Punkte) bis Farbe (gesetztes Punktelimit) dargestellt.</p></td></tr>',e+=displayOverviewHighlight("Gesamtpunkte","highlight_score",cBlue),e+=displayOverviewHighlight("Gebäudepunkte","highlight_score_building",cGreen),e+=displayOverviewHighlight("Forschungspunkte","highlight_score_science",cPink),e+=displayOverviewHighlight("Militärpunkte","highlight_score_military",cRed),e+=displayOverviewHighlight("Verteidigungspunkte","highlight_score_defense",cYellow),e+=displayOverviewHighlight("Galaxie überschreiben? (z.B. 4 für Gala 4)","show_galaxy",cWhite,"Galaxie Nummer"),e+='<tr><th colspan="4">FILTER</th></tr>',e+=displayOverviewSettingsSelect(getHotkeyIcon("I")+"Inaktive Spieler","filter_inactive",{ALL:"Anzeigen",HIDE:"Ausblenden",ONLY:"Andere ausblenden"}),e+=displayOverviewSettingsSelect(getHotkeyIcon("N")+"Spieler mit Noobschutz","filter_noobs",{ALL:"Anzeigen",HIDE:"Ausblenden",ONLY:"Andere ausblenden"}),e+=displayOverviewSettingsSelect(getHotkeyIcon("U")+"Spieler im Urlaubsmodus","filter_vacation",{ALL:"Anzeigen",HIDE:"Ausblenden",ONLY:"Andere ausblenden"}),e+=displayOverviewSettingsSelect(getHotkeyIcon("A")+"Spieler der Allianz","filter_alliance",{ALL:"Anzeigen",HIDE:"Ausblenden",ONLY:"Andere ausblenden"}),e+=displayOverviewSettingsSelect(getHotkeyIcon("S")+"Spieler mit Spiobericht","filter_spy_report",{ALL:"Anzeigen",HIDE:"Ausblenden",ONLY:"Andere ausblenden"}),e+=displayOverviewSettingsSelect(getHotkeyIcon("K")+"Spieler mit Kampfbericht","filter_battle_report",{ALL:"Anzeigen",HIDE:"Ausblenden",ONLY:"Andere ausblenden"}),e+='<tr><th colspan="4">THRESHOLDS</th></tr>',e+=displayOverviewSettingsRange(getHotkeyIcon("P",!0)+"Punkte","filter_score"),e+=displayOverviewSettingsRange(getHotkeyIcon("G",!0)+"Gebäudepunkte","filter_score_building"),e+=displayOverviewSettingsRange(getHotkeyIcon("F",!0)+"Forschungspunkte","filter_score_science"),e+=displayOverviewSettingsRange(getHotkeyIcon("M",!0)+"Militärpunkte","filter_score_fleet"),e+=displayOverviewSettingsRange(getHotkeyIcon("V",!0)+"Verteidigungspunkte","filter_score_defense"),e+=displayOverviewSettingsRange(getHotkeyIcon("I",!0)+"Inaktiv seit ... Stunden","filter_inactive_since"),e+=displayOverviewSettingsRange(getHotkeyIcon("K",!0)+"Stunden seit letztem Kampfbericht","filter_last_battle_report"),e+=displayOverviewSettingsRange(getHotkeyIcon("S",!0)+"Stunden seit letztem Spionagebericht","filter_last_spy_report"),e+=displayOverviewSettingsRange(getHotkeyIcon("Q",!0)+"Metall (letzte Spionage)","filter_metal"),e+=displayOverviewSettingsRange(getHotkeyIcon("W",!0)+"Kristall (letzte Spionage)","filter_crystal"),e+=displayOverviewSettingsRange(getHotkeyIcon("E",!0)+"Deuterium (letzte Spionage)","filter_deuterium"),e+="</table>",e}},964:()=>{window.formatTimeDiff=function(e){if(0===getInt(e))return"---";const t=Math.ceil(e-(new Date).getTime()/1e3),a=Math.floor(t/3600),i=t%3600,n=Math.floor(i/60),s=i%60;return addTrailingZeros(a)+":"+addTrailingZeros(n)+":"+addTrailingZeros(s)},window.addTrailingZeros=function(e){return e<=0?"00":e<10?"0"+e:e}},292:()=>{window.getColorAlt=function(e,t,a){var i=1===t?1:t-.33,n=1-(i=(i=i<0?0:i)>1?1:i);n=(n=n>1?1:n)<0?0:n;var s=[Math.round(e[0]*i+a[0]*n),Math.round(e[1]*i+a[1]*n),Math.round(e[2]*i+a[2]*n)];return"rgb("+s[0]+", "+s[1]+", "+s[2]+");"+(1===t?"font-weight: bold":"")}},487:()=>{window.getColorIntensity=function(e,t){var a=e/t*255;return a>255?255:a}},741:()=>{window.getColor=function(e,t){var a=[255,255,255],i=t,n=1-(i=(i=i<0?0:i)>1?1:i);n=(n=n>1?1:n)<0?0:n;var s=[Math.round(e[0]*i+a[0]*n),Math.round(e[1]*i+a[1]*n),Math.round(e[2]*i+a[2]*n)];return"rgb("+s[0]+", "+s[1]+", "+s[2]+")"}},327:()=>{window.getCoordinates=function(e){return!!e&&e.match(/([0-9]+)\:([0-9]+)\:([0-9]+)/)}},15:()=>{window.getHotkeyIcon=function(e,t=!1){let a="";return t&&(a=getHotkeyIcon('<i class="fa fa-arrow-up"></i>')),a+'<span style="width: 21px; outline: 1px solid '+getRgb(cRed)+"; outline-offset: -1px; display: inline-block; font-size: 10px; line-height: 21px; text-align: center; margin-right: 5px; border-radius: 2px; background: "+getRgb(cBlack)+"; color: "+getRgb(cRed)+'">'+e+"</span>"}},652:()=>{window.getInt=function(e){return parseInt((null!=e&&""!==e?e:"0").toString().replace(/\./g,""))}},227:()=>{window.getMaxValue=function(e,t){let a=null;return $.each(e,(function(e,i){parseInt(i[t])>a&&(a=parseInt(i[t]))})),a}},121:()=>{window.getPlayerAttributeStyle=function(e,t,a,i){let n=1;return cfgHighlight[a]&&cfgHighlight[a].enabled?n=cfgHighlight[a].threshold:t&&t[a]&&(n=getInt(t[a])),{color:getColor(i,getInt(e[a])/n)}},window.getPlayerScoreStyle=function(e,t){return getPlayerAttributeStyle(e,t,"score",cBlue)},window.getPlayerScoreBuildingStyle=function(e,t){return getPlayerAttributeStyle(e,t,"score_building",cGreen)},window.getPlayerScoreScienceStyle=function(e,t){return getPlayerAttributeStyle(e,t,"score_science",cPink)},window.getPlayerScoreMilitaryStyle=function(e,t){return getPlayerAttributeStyle(e,t,"score_military",cRed)},window.getPlayerScoreDefenseStyle=function(e,t){return getPlayerAttributeStyle(e,t,"score_defense",cYellow)}},432:()=>{window.getPlayerRowTdStyle=function(e,t){return 1===e.on_vacation?{color:getRgb(cBlue)}:null===ownPlayer||null===ownPlayer.alliance_id||12!==e.alliance_id&&95!==e.alliance_id?1===e.is_inactive?{color:getRgb(cCyan)}:getInt(e.score)<getInt(t)/5?{color:getRgb(cGray)}:getInt(e.score)>5*getInt(t)?{color:getRgb(cRed)}:{}:{color:getRgb(cGreen)}}},438:()=>{window.getPlayerRowStyle=function(e,t){return 1===e.on_vacation?{background:getRgb(cBlue)}:null===ownPlayer||null===ownPlayer.alliance_id||12!==e.alliance_id&&95!==e.alliance_id?1===e.is_inactive?{background:getRgb(cCyan)}:getInt(e.score)<t/5?{background:getRgb(cGray)}:getInt(e.score)>5*t?{background:getRgb(cRed)}:{}:{background:getRgb(cGreen)}}},64:()=>{window.getRgb=function(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}},805:()=>{window.getStyle=function(e){return 0===getInt(e)?"text-gray":getInt(e)<0?"text-red":"text-green"}},590:()=>{window.hotkeys=function(){$(window).keypress((function(e){0!==$("*:focus").length||(103===e.keyCode&&(document.location.href="/game.php?page=overview"),104!==e.keyCode)||(document.location.href="/game.php?page=messages&category=100")}))}},130:()=>{window.numberFormat=function(e,t=!1){if(t){let t="K";return 0===(e=getInt(e))?"":(e>1e6&&(e/=1e3,t="KK"),(Math.round(e/100)/10).toFixed(1)+t)}return Math.floor(e||0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},859:()=>{window.PlanetResourceNotification=function(){this.addNotification=function(e,t,a,i,n){setValue(e+"_notification_resourceId",t),setValue(e+"_notification_metal",parseInt(a)),setValue(e+"_notification_crystal",parseInt(i)),setValue(e+"_notification_deuterium",parseInt(n)),showMessage("Benachrichtigung gespeichert."),$("body").animate({left:0},1e3,(()=>{window.location.reload()}))},this.removeNotification=function(e){setValue(e+"_notification_resourceId",null),setValue(e+"_notification_metal",null),setValue(e+"_notification_crystal",null),setValue(e+"_notification_deuterium",null),window.location.reload()},this.hasNotification=function(e,t){return parseInt(getValue(e+"_notification_resourceId"))===parseInt(t)},this.getFinishTime=function(e){if(0===getInt(getValue(e+"_notification_resourceId")))return null;let t=this.getFinishTimeForResource(e,"metal"),a=this.getFinishTimeForResource(e,"crystal"),i=this.getFinishTimeForResource(e,"deuterium");return i>a&&i>t?i:a>t?a:t<=(new Date).getTime()/1e3?null:t},this.getFinishTimeForResource=function(e,t){const a=getInt(getValue(e+"_notification_"+t)),i=getInt(getValue(e+"_"+t)),n=getInt(getValue(e+"_production_"+t)),s=getInt(getValue(e+"_resource_update")),r=a-i<0?0:a-i,l=r<0?0:r/n*86400;return Math.ceil(s/1e3+l)},this.getDiffForResource=function(e,t){const a=getInt(getValue(e+"_notification_"+t)),i=getInt(getValue(e+"_"+t));return numberFormat(a-i<0?0:a-i)}}},688:()=>{window.replaceFixColors=function(){$("content *[style]").each((function(e,t){-1!==$(t).attr("style").search(/color\:lime/)&&($(t).attr("style",$(t).attr("style").replace(/color\:lime/,"")),$(t).addClass("text-green")),-1!==$(t).attr("style").search(/color\:\#ffd600/)&&($(t).attr("style",$(t).attr("style").replace(/color\:\#ffd600/,"")),$(t).addClass("text-red")),-1!==$(t).attr("style").search(/color\:red/)&&($(t).attr("style",$(t).attr("style").replace(/color\:\#ffd600/,"")),$(t).addClass("text-red"))}))}},225:()=>{window.Resources=function(){const e=this;this.sumMetal=0,this.sumCrystal=0,this.sumDeuterium=0,this.sumLimitMetal=0,this.sumLimitCrystal=0,this.sumLimitDeuterium=0,this.init=function(){setValue(ownCoords[0]+"_metal",getInt($("#current_metal").html()).toString()),setValue(ownCoords[0]+"_crystal",getInt($("#current_crystal").html()).toString()),setValue(ownCoords[0]+"_deuterium",getInt($("#current_deuterium").html()).toString()),setValue(ownCoords[0]+"_resource_update",(new Date).getTime().toString()),e.updateVars()},this.updateVars=function(){let t;this.sumMetal=0,this.sumCrystal=0,this.sumDeuterium=0,this.sumLimitMetal=0,this.sumLimitCrystal=0,this.sumLimitDeuterium=0,$("#planetSelector option").each((function(a,i){t=getCoordinates(i.innerHTML)[0],e.updateVar(t,"metal"),e.updateVar(t,"crystal"),e.updateVar(t,"deuterium")})),$("#sumMetal").html(numberFormat(this.sumMetal,!0)),$("#sumCrystal").html(numberFormat(this.sumCrystal,!0)),$("#sumDeuterium").html(numberFormat(this.sumDeuterium,!0)),$("#sumLimitMetal").html(numberFormat(this.sumLimitMetal,!0)),$("#sumLimitCrystal").html(numberFormat(this.sumLimitCrystal,!0)),$("#sumLimitDeuterium").html(numberFormat(this.sumLimitDeuterium,!0)),$("#current_metal").stop().animate({left:0},1e3,(()=>{e.updateVars()}))},this.updateVar=function(e,t){const a=getInt(getValue(e+"_"+t)),i=getInt(getValue(e+"_production_"+t)),n=getInt(getValue(e+"_limit_"+t)),s=getValue(e+"_resource_update")?(new Date).getTime()-getInt(getValue(e+"_resource_update")):null,r=s?a+i/86400*s/1e3:a;switch(r>n?$(".ress_"+t+"_"+e.replace(/\:/g,"_")).html('<span class="text-red" title="Die Lager sind vermutlich voll. Produktion gestoppt.">'+numberFormat(parseInt(r),!0)+'<small style="color: #888"> / '+numberFormat(parseInt(n),!0)+"</small></span>"):$(".ress_"+t+"_"+e.replace(/\:/g,"_")).html(numberFormat(parseInt(r),!0)+'<small style="color: #888"> / '+numberFormat(parseInt(n),!0)+"</small>"),t){case"metal":this.sumMetal+=parseInt(r),this.sumLimitMetal+=parseInt(n);break;case"crystal":this.sumCrystal+=parseInt(r),this.sumLimitCrystal+=parseInt(n);break;case"deuterium":this.sumDeuterium+=parseInt(r),this.sumLimitDeuterium+=parseInt(n)}}}},276:()=>{window.savePhOption=function(e,t){setValue(e,t),pageOverview.renderHtml()}},724:()=>{window.showMessage=function(e,t){let a,i;"danger"===t?(a="#161618",i="#d23c22"):(a="#161618",i="#5cb85c"),$("#alertBox").remove(),$("body").prepend('<div id="alertBox" style="padding: 25px 15px; background: '+a+"; color: "+i+'; z-index: 10000; position: fixed; top: 0; left: 0; right: 0; opacity: 0; text-align: center; font-weight: bold;">'+e+"</div>"),$("#alertBox").animate({opacity:1},250).animate({opacity:1},2500).animate({opacity:0},500,(function(){$(this).remove()}))}},738:()=>{window.isNewerVersionAvailable=function(e){e!==version&&(setValue("version",e),window.location.reload())}},879:()=>{window.getJSON=function(e,t){return e=apiUrl+e+"?api_key="+apiKey+"&version="+version,debugMode&&console.log("GET",e),xmlhttpRequest({method:"GET",url:e,onload:function(e){debugMode&&console.log(e.responseText),t(e)},onerror:function(e){debugMode&&console.log(e.status)}})}},398:()=>{window.postJSON=function(e,t,a){return e=apiUrl+e+"?api_key="+apiKey+"&version="+version,debugMode&&console.log("POST",e,t),xmlhttpRequest({method:"POST",data:JSON.stringify(t),url:e,headers:{"Content-Type":"application/json"},onload:function(e){debugMode&&console.log(e.status),a(e)},onerror:function(e){debugMode&&console.log(e.status)}})}}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";a(989),a(545),a(977),a(679),a(795),a(261),a(826),a(964),a(741),a(292),a(487),a(327),a(15),a(652),a(227),a(121),a(432),a(438),a(64),a(805),a(590),a(130),a(859),a(688),a(225),a(276),a(724),a(738),a(879),a(398),a(809),a(328),a(170),a(550),a(551),a(164),a(497),a(691),a(419),a(896),a(524),a(789),a(658),a(577),a(34),a(683),window.updateConfigVars=function(){cfgHighlight={score:{enabled:"1"===(getValue("highlight_score_enable")||"0"),threshold:getInt(getValue("highlight_score_value")||"")},score_building:{enabled:"1"===(getValue("highlight_score_building_enable")||"0"),threshold:getInt(getValue("highlight_score_building_value")||"")},score_science:{enabled:"1"===(getValue("highlight_score_science_enable")||"0"),threshold:getInt(getValue("highlight_score_science_value")||"")},score_military:{enabled:"1"===(getValue("highlight_score_military_enable")||"0"),threshold:getInt(getValue("highlight_score_military_value")||"")},score_defense:{enabled:"1"===(getValue("highlight_score_defense_enable")||"0"),threshold:getInt(getValue("highlight_score_defense_value")||"")}},e=getValue("filter_inactive")||"ALL",t=getValue("filter_noobs")||"ALL",i=getValue("filter_vacation")||"ALL",n=getValue("filter_alliance")||"ALL",s=getValue("filter_spy_report")||"ALL",r=getValue("filter_last_battle_report")||"ALL",l=getValue("filter_score_enable")||"0",o=getValue("filter_score_min")||"",d=getValue("filter_score_max")||"",c=getValue("filter_score_building_enable")||"0",h=getValue("filter_score_building_min")||"",g=getValue("filter_score_building_max")||"",p=getValue("filter_score_science_enable")||"0",u=getValue("filter_score_science_min")||"",f=getValue("filter_score_science_max")||"",m=getValue("filter_score_fleet_enable")||"0",y=getValue("filter_score_fleet_min")||"",b=getValue("filter_score_fleet_max")||"",_=getValue("filter_score_defense_enable")||"0",w=getValue("filter_score_defense_min")||"",x=getValue("filter_score_defense_max")||"",v=getValue("filter_inactive_since_enable")||"0",S=getValue("filter_inactive_since_min")||"",k=getValue("filter_inactive_since_max")||"",R=getValue("filter_last_battle_report_enable")||"0",I=getValue("filter_last_battle_report_min")||"",P=getValue("filter_last_battle_report_max")||"",V=getValue("filter_last_spy_report_enable")||"0",M=getValue("filter_last_spy_report_min")||"",C=getValue("filter_last_spy_report_max")||"",E=getValue("filter_metal_enable")||"0",A=getValue("filter_metal_min")||"",z=getValue("filter_metal_max")||"",D=getValue("filter_crystal_enable")||"0",G=getValue("filter_crystal_min")||"",L=getValue("filter_crystal_max")||"",F=getValue("filter_deuterium_enable")||"0",H=getValue("filter_deuterium_min")||"",N=getValue("filter_deuterium_max")||""},window.getOverviewHeader=function(){let e='<table cellspacing="0"><tr><td width="50%%" style="text-align: left; padding: 5px 10px">';return e+='<a href="https://pr0game-hub.eskju.net/download/legend.png" target="_blank"><i class="fa fa-info-circle"></i> Legende</a>',e+=" // ",e+='<a href="https://pr0game-hub.eskju.net/download/faq.txt" target="_blank"><i class="fa fa-question-circle"></i> FAQ</a>',e+="</td>","1"===getValue("hideSettings")?e+='<td id="showSettings" style="text-align: right; padding: 5px 10px; cursor: pointer;"><i class="fa fa-cogs fa"></i> Einstellungen anzeigen</td>':e+='<td id="hideSettings" style="text-align: right; padding: 5px 10px; cursor: pointer;"><span style="color: lightgreen"><i class="fa fa-cogs"></i> Einstellungen ausblenden</span></td>',e+="</tr></table>",e+=displayOverviewSettings(),e},window.filterTableRow=function(a,$){if("HIDE"===e&&1===a.player.is_inactive)return!1;if("ONLY"===e&&0===a.player.is_inactive)return!1;if(null!==$){if("HIDE"===t&&0===a.player.is_inactive&&getInt(a.player.score)<getInt($.score)/5)return!1;if("ONLY"===t&&0===a.player.is_inactive&&getInt(a.player.score)>=getInt($.score)/5)return!1}if("HIDE"===i&&1===a.player.on_vacation)return!1;if("ONLY"===i&&0===a.player.on_vacation)return!1;if($){if("HIDE"===n&&null!==a.player.alliance_id&&(12===a.alliance_id||95===a.alliance_id))return!1;if("ONLY"===n&&(null===a.player.alliance_id||12!==a.alliance_id&&95!==a.alliance_id))return!1}return!("HIDE"===s&&""!==a.last_spy_report||"ONLY"===s&&""===a.last_spy_report||"HIDE"===r&&""!==a.last_battle_report||"ONLY"===r&&""===a.last_battle_report||"1"===l&&getInt(o)>0&&getInt(o)>getInt(a.player.score)||"1"===l&&getInt(d)>0&&getInt(d)<getInt(a.player.score)||"1"===c&&getInt(h)>0&&getInt(h)>getInt(a.player.score_building)||"1"===c&&getInt(g)>0&&getInt(g)<getInt(a.player.score_building)||"1"===p&&getInt(u)>0&&getInt(u)>getInt(a.player.score_science)||"1"===p&&getInt(f)>0&&getInt(f)<getInt(a.player.score_science)||"1"===m&&getInt(y)>0&&getInt(y)>getInt(a.player.score_military)||"1"===m&&getInt(b)>0&&getInt(b)<getInt(a.player.score_military)||"1"===_&&getInt(w)>0&&getInt(w)>getInt(a.player.score_defense)||"1"===_&&getInt(x)>0&&getInt(x)<getInt(a.player.score_defense)||"1"===v&&getInt(S)>0&&getInt(S)>getInt(a.inactive_since)||"1"===v&&getInt(k)>0&&getInt(k)<getInt(a.inactive_since)||"1"===R&&getInt(I)>0&&getInt(I)>getInt(a.last_battle_report_hours)||"1"===R&&getInt(P)>0&&getInt(P)<getInt(a.last_battle_report_hours)||"1"===V&&getInt(M)>0&&getInt(M)>getInt(a.last_spy_report_hours)||"1"===V&&getInt(C)>0&&getInt(C)<getInt(a.last_spy_report_hours)||"1"===E&&getInt(A)>0&&getInt(A)>getInt(a.last_spy_metal)||"1"===E&&getInt(z)>0&&getInt(z)<getInt(a.last_spy_metal)||"1"===D&&getInt(G)>0&&getInt(G)>getInt(a.last_spy_crystal)||"1"===D&&getInt(L)>0&&getInt(L)<getInt(a.last_spy_crystal)||"1"===F&&getInt(H)>0&&getInt(H)>getInt(a.last_spy_deuterium)||"1"===F&&getInt(N)>0&&getInt(N)<getInt(a.last_spy_deuterium))},window.showSpyReportHistory=function(e){$("body").append('<div id="spyReportBackdrop" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.95); z-index: 10000"></div>'),$("body").append('<div id="spyReportOverlay" style="position: fixed; top: 25px; left: 25px; right: 25px; max-height: 95%; z-index: 10000; background: #161618; overflow-y: auto"></div>');var t=$("#spyReportOverlay"),a="";a+=showSpyReportHistoryBox(e,"resources"),a+=showSpyReportHistoryBox(e,"fleet"),a+=showSpyReportHistoryBox(e,"defense"),a+=showSpyReportHistoryBox(e,"science"),a+=showSpyReportHistoryBox(e,"buildings"),$(t).html(a),$(window).keydown((function(e){"Escape"===e.key&&($("#spyReportOverlay").remove(),$("#spyReportBackdrop").remove())})),$("#spyReportBackdrop").click((function(){$("#spyReportOverlay").remove(),$("#spyReportBackdrop").remove()}))},window.showSpyReportHistoryBox=function(e,t){var a='<table width="100%" style="max-width: 100% !important" class="table519"><tr>';return a+='<th style="text-align: left; width: 250px" width="200">Zeit</th>',$(e[t].data[0].values).each((function(e,t){a+='<th style="text-align: center;">'+t.name+"</th>"})),a+="</tr>",$(e[t].data).each((function(e,t){a+="<tr>",a+='<td style="text-align: left;">'+t.timestamp+"</td>",$(t.values).each((function(e,t){t.value=null===t.value?"---":t.value,a+='<td style="position: relative; '+("0"!==t.value.toString()&&"---"!==t.value.toString()?"color: #fff":"color: #444")+'">',a+=t.value,null===t.difference||0===t.difference||t.valueBefore===t.value||(t.valueBefore&&t.valueBefore>t.value?a+=' <span style="color: '+getRgb(cRed)+'; position: absolute; right: 15px">'+t.difference+"</span>":a+=' <span style="color: '+getRgb(cGreen)+'; position: absolute; right: 15px">+'+t.difference+"</span>"),a+="</td>"})),a+="</tr>"})),a+="</table>"},window.parseUrl=function(){const e=window.location.href.replace("www.","");if(location.hash&&location.hash.length>0){const e=location.hash.split(".");if("#hub"===e[0])return pageHub=new PageHub,void pageHub.loadPage(e[1])}else"https://pr0game.com/game.php"===e||0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=overview/)?(window.pageOverview=new PageOverview,pageOverview.init()):0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=statistics/)?parsePageStatistics():0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=messages/)?(window.pageMessages=new PageMessages,pageMessages.init()):0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=galaxy/)?(window.pageGalaxy=new PageGalaxy,pageGalaxy.init()):0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=playerCard/)?parsePagePlayerCard():0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=alliance/)?parsePageAlliance():0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=buildings/)?(window.pageBuildings=new PageBuildings,pageBuildings.init()):0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=shipyard/)?(window.pageHangar=new PageHangar,pageHangar.init()):0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=research/)?(window.pageResearch=new PageResearch,pageResearch.init()):0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=fleetTable/)?(window.pageFleet=new PageFleet,pageFleet.init()):0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=fleetStep/)?$(window).keyup((function(e){1===$("content form").length&&0===$("*:focus").length&&"Enter"===e.key&&$("content .table519 form").submit()})):0===e.search(/https\:\/\/pr0game\.com\/game\.php\?page\=resources/)&&(window.pageResources=new PageResources,pageResources.init())},window.cBlack=[22,22,24],window.cWhite=[242,245,244],window.cRed=[238,77,46],window.cGray=[136,136,136],window.cPink=[255,0,130],window.cGreen=[92,184,92],window.cBlue=[0,143,255],window.cYellow=[247,197,22],window.cCyan=[0,255,255],window.ownCoords=getCoordinates($("#planetSelector option:selected").html()),window.ownGalaxy=ownCoords[1],window.ownSystem=ownCoords[2],window.ownPlanet=ownCoords[3],window.showGalaxy=ownGalaxy,window.ownPlayer=null,window.menu=null,window.pageHub=null,window.pageOverview=null,window.pageBuildings=null,window.pageHangar=null,window.pageDefense=null,window.pageResearch=null,window.pageGalaxy=null,window.pageFleet=null,window.pageMessages=null,window.pageTechnologies=null,window.pageResources=null,window.rxNumber="([.0-9]+)",window.cfgHighlight={};let e=getValue("filter_inactive")||"ALL",t=getValue("filter_noobs")||"ALL",i=getValue("filter_vacation")||"ALL",n=getValue("filter_alliance")||"ALL",s=getValue("filter_spy_report")||"ALL",r=getValue("filter_last_battle_report")||"ALL",l=getValue("filter_score_enable")||"0",o=getValue("filter_score_min")||"",d=getValue("filter_score_max")||"",c=getValue("filter_score_building_enable")||"0",h=getValue("filter_score_building_min")||"",g=getValue("filter_score_building_max")||"",p=getValue("filter_score_science_enable")||"0",u=getValue("filter_score_science_min")||"",f=getValue("filter_score_science_max")||"",m=getValue("filter_score_fleet_enable")||"0",y=getValue("filter_score_fleet_min")||"",b=getValue("filter_score_fleet_max")||"",_=getValue("filter_score_defense_enable")||"0",w=getValue("filter_score_defense_min")||"",x=getValue("filter_score_defense_max")||"",v=getValue("filter_inactive_since_enable")||"0",S=getValue("filter_inactive_since_min")||"",k=getValue("filter_inactive_since_max")||"",R=getValue("filter_last_battle_report_enable")||"0",I=getValue("filter_last_battle_report_min")||"",P=getValue("filter_last_battle_report_max")||"",V=getValue("filter_last_spy_report_enable")||"0",M=getValue("filter_last_spy_report_min")||"",C=getValue("filter_last_spy_report_max")||"",E=getValue("filter_metal_enable")||"0",A=getValue("filter_metal_min")||"",z=getValue("filter_metal_max")||"",D=getValue("filter_crystal_enable")||"0",G=getValue("filter_crystal_min")||"",L=getValue("filter_crystal_max")||"",F=getValue("filter_deuterium_enable")||"0",H=getValue("filter_deuterium_min")||"",N=getValue("filter_deuterium_max")||"";window.alert=function(e){window.location.reload()},$(window).on("hashchange",(function(){parseUrl()})),window.pageHub=new PageHub,pageHub.init(),window.menu=new Menu,menu.init(),hotkeys(),replaceFixColors(),(new Resources).init(),$("head").append('<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>'),parseUrl()})()})();